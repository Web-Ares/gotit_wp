"use strict";!function(){$(function(){$.each($(".site__index-page"),function(){new e($(this))}),$.each($("body"),function(){new n($(this))}),$.each($(".site__header"),function(){new i($(this))}),$.each($(".main-slider"),function(){new t($(this))}),$.each($(".expertise__items"),function(){new o($(this))}),$.each($(".squad__items"),function(){new s($(this))}),$.each($(".our-clients__items"),function(){new r($(this))}),$.each($(".reviews"),function(){new a($(this))}),$.each($(".contacts__map"),function(){new l($(this))})});var e=function(e){var n,i=this,t=e,o=$(window),s=$("html, body"),r=!1,a=!1,l=!1,c=0,d=!1,w=t.find(".swiper-slide__content"),u=$(".main-slider"),f=u.find(".main-slider__btn-down"),p=function(){w.on({scroll:function(){if(d){var e=t.find(".site__index-swiper .swiper-slide-active"),i=e.find(".swiper-slide__content"),o=i.find(">div");_(i),b(i,o),a&&!l&&c<0&&(n.unlockSwipeToPrev(),n.enableMousewheelControl()),l&&!a&&c>0&&(n.unlockSwipeToNext(),n.enableMousewheelControl()),l||a||(n.lockSwipes(),n.disableMousewheelControl())}}}),o.on({resize:function(){if(o.width()>=768?d||(g(),d=!0):d&&(m(),d=!1),d){var e=t.find(".site__index-swiper .swiper-slide-active"),n=e.find(".swiper-slide__content"),i=n.find(">div");v(i),C()}}}),w.on({DOMMouseScroll:function(e){var i=e.originalEvent.detail;i&&(c=i>0?1:-1,h(c)),a&&!l&&c>0&&(n.lockSwipeToPrev(),n.disableMousewheelControl()),l&&!a&&c<0&&(n.lockSwipeToNext(),n.disableMousewheelControl()),a&&!l&&c<0&&(n.unlockSwipeToPrev(),n.enableMousewheelControl()),l&&!a&&c>0&&(n.unlockSwipeToNext(),n.enableMousewheelControl())},mousewheel:function(e){var i=e.originalEvent.wheelDelta;i&&(c=i>0?-1:1,h(c)),a&&!l&&c>0&&(n.lockSwipeToPrev(),n.disableMousewheelControl()),l&&!a&&c<0&&(n.lockSwipeToNext(),n.disableMousewheelControl()),a&&!l&&c<0&&(n.unlockSwipeToPrev(),n.enableMousewheelControl()),l&&!a&&c>0&&(n.unlockSwipeToNext(),n.enableMousewheelControl())}}),f.on({click:function(){return o.width()>=768?n.slideNext(!0,600):(s.stop(!0,!1),s.animate({scrollTop:u.innerHeight()},300)),!1}})},h=function(e){e<0&&a&&d&&(n.unlockSwipeToPrev(),n.enableMousewheelControl())},v=function(e){r=o.scrollTop()+o.height()>=e.innerHeight()},_=function(e){a=e.scrollTop()<=0},b=function(e,n){l=e.scrollTop()+o.height()>=n.innerHeight()},g=function(){n=new Swiper(".site__index-swiper",{direction:"vertical",spaceBetween:0,speed:700,slidesPerView:1,autoHeight:"auto",mousewheelControl:!0,onInit:function(e){var n=t.find(".site__index-swiper .swiper-slide-active"),i=n.find(".swiper-slide__content"),o=n.find(".swiper-slide__content>div");c=0,v(o),_(i),b(i,o),r?(e.unlockSwipes(),e.enableMousewheelControl()):(e.lockSwipes(),e.disableMousewheelControl(),e.disableKeyboardControl(),h(c))},onSlideChangeStart:function(e){var n=e.activeIndex;n>0?$(".logo_index").hide():$(".logo_index").show()},onSlideChangeEnd:function(e){var n=t.find(".site__index-swiper .swiper-slide-active"),i=n.find(".swiper-slide__content"),o=n.find(".swiper-slide__content>div");c=0,v(o),_(i),b(i,o),r?(e.unlockSwipes(),e.enableMousewheelControl()):(e.lockSwipes(),e.disableMousewheelControl(),e.disableKeyboardControl(),h(c))}})},m=function(){n.destroy(!0,!0)},C=function(){w.each(function(){var e=$(this),n=e.find(">div");e.innerHeight()>n.innerHeight()?e.addClass("centered"):e.removeClass("centered")})},x=function(){t[0].obj=i,p(),o.width()>=768&&(d||(g(),C(),d=!0))};x()},n=function(e){var n=this,i=e,t=$(window),o=$("body"),s=function(){t.on({resize:function(){t.width()>=1024?a():o.css({"font-size":"75px"})}})},r=function(){s(),t.width()>=1024&&a(),i[0].obj=n},a=function(){var e;e=t.height()>500?100*(window.innerHeight/900)+"px":100*(500/900)+"px",o.css({"font-size":e})};r()},i=function(e){var n=this,i=e,t=$(window),o=i.find(".site__header__btn"),s=i.find(".site__header-menu"),r=$("html"),a=$("body"),l=function(){i.removeClass("opened"),r.css({"overflow-y":"auto"}),a.css({"overflow-y":"auto"}),s.attr("style","")},c=function(){t.on({resize:function(){i.hasClass("opened")&&l()}}),o.on({click:function(){return i.hasClass("opened")?l():d(),!1}})},d=function(){i.addClass("opened"),r.css({"overflow-y":"hidden"}),a.css({"overflow-y":"hidden"})},w=function(){c(),i[0].obj=n};w()},t=function(e){var n,i=this,t=e,o=$(window),s=$(".site__header"),r=t.find(".vegetable1"),a=t.find(".vegetable2"),l=t.find(".vegetable3"),c=t.find(".vegetable4"),d=t.find(".vegetable5"),w=15,u=10,f=5,p=20,h=25,v=function(){o.on({mousemove:function(e){if(o.width()>1024&&!s.hasClass("opened")){var n=e.pageX,i=e.pageY,v=t.width()/2,_=t.height()/2,$=(n-v)/v,m=(i-_)/_;o.outerWidth()>768&&(b($,m,w,r),g($,m,u,a),g($,m,f,l),b($,m,p,c),b($,m,h,d))}}})},_=function(){n=new Swiper(t.find(".swiper-container"),{spaceBetween:0,slidesPerView:1,nextButton:t.find(".swiper-button-next")[0],prevButton:t.find(".swiper-button-prev")[0]})},b=function(e,n,i,t){t.css({"-webkit-transform":"translate( "+-(e*i)+"px,"+-(n*i)+"px )",transform:"translate( "+-(e*i)+"px, "+-(n*i)+"px  )"})},g=function(e,n,i,t){t.css({"-webkit-transform":"translate( "+e*i+"px ,"+n*i+"px  )",transform:"translate( "+e*i+"px , "+n*i+"px  )"})},m=function(){t[0].obj=i,v(),_()};m()},o=function(e){var n,i=this,t=e,o=$(window),s=!1,r=function(){o.on({resize:function(){o.width()<768?s||(a(),s=!0):s&&(l(),s=!1)}})},a=function(){n=new Swiper(t.find(".swiper-container"),{slidesPerView:1.9,centeredSlides:!0})},l=function(){n.destroy(!0,!0)},c=function(){t[0].obj=i,r(),o.width()<768&&(s||(a(),s=!0))};c()},s=function(e){var n,i=this,t=e,o=$(window),s=!1,r=function(){o.on({resize:function(){o.width()<768?s||(a(),s=!0):s&&(l(),s=!1)}})},a=function(){n=new Swiper(t.find(".swiper-container"),{slidesPerView:1.75,centeredSlides:!0})},l=function(){n.destroy(!0,!0)},c=function(){t[0].obj=i,r(),o.width()<768&&(s||(a(),s=!0))};c()},r=function(e){var n,i=this,t=e,o=$(window),s=function(){o.on({resize:function(){}})},r=function(){n=new Swiper(t.find(".swiper-container"),{slidesPerView:5,nextButton:t.find(".swiper-button-next")[0],prevButton:t.find(".swiper-button-prev")[0],breakpoints:{1024:{slidesPerView:3},768:{slidesPerView:1}}})},a=function(){t[0].obj=i,s(),r()};a()},a=function(e){var n,i=this,t=e,o=$(window),s=function(){o.on({resize:function(){}})},r=function(){n=new Swiper(t.find(".swiper-container"),{slidesPerView:1,spaceBetween:30,loop:!0,autoplay:7e3,autoplayDisableOnInteraction:!1,nextButton:t.find(".swiper-button-next")[0],prevButton:t.find(".swiper-button-prev")[0]})},a=function(){t[0].obj=i,s(),r()};a()},l=function(e){var n,i,t=e,o=t.find("#contact-google-map"),s=o.data("map-lat"),r=o.data("map-lng"),a=o.data("map-zoom"),l=$(".contacts__cities .btn"),c=function(){l.on({click:function(){var e=$(this);if(!e.hasClass("active")){l.removeClass("active"),e.addClass("active");var t={lat:$(this).data("map-lat"),lng:$(this).data("map-lng")};i.setPosition(t),setTimeout(function(){google.maps.event.trigger(n,"resize"),n.setCenter(t)},300)}}})},d=function(){var e=new google.maps.StyledMapType([],{name:"Custom Style"}),t="custom_style";n=new google.maps.Map(o[0],{zoom:a,center:{lat:s,lng:r},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,t]}}),i=new google.maps.Marker({position:{lat:s,lng:r},map:n}),n.mapTypes.set(t,e),n.setMapTypeId(t)},w=function(){google.maps.event.addDomListener(window,"load",d),c()};w()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiUGFnZSIsInRoaXMiLCJab29tU2l0ZSIsIk1lbnUiLCJNYWluU2xpZGVyIiwiRXhwZXJ0aXNlU2xpZGVyIiwiU3F1YWRTbGlkZXIiLCJDbGllbnRzU2xpZGVyIiwiUmV2aWV3c1NsaWRlciIsIkxvY2F0aW9uIiwib2JqIiwiX3N3aXBlciIsIl9zZWxmIiwiX29iaiIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfZG9tIiwiX2FjdGlvblNjcm9sbCIsIl9hY3Rpb25TY3JvbGxUb3AiLCJfYWN0aW9uU2Nyb2xsQm90dG9tIiwiX2RpcmVjdGlvbiIsIl9zd2lwZXJJbml0IiwiX3N3aXBlckNvbnRlbnQiLCJmaW5kIiwiX21haW5TbGlkZXIiLCJfYnRuRG93biIsIl9hZGRFdmVudHMiLCJvbiIsInNjcm9sbCIsImFjdFNsaWRlIiwiYWN0U2xpZGVDb250ZW50IiwiYWN0U2xpZGVDb250ZW50SW5uZXIiLCJfY2hlY2tBY3Rpb25TY3JvbGxUb3AiLCJfY2hlY2tBY3Rpb25TY3JvbGxCb3R0b20iLCJ1bmxvY2tTd2lwZVRvUHJldiIsImVuYWJsZU1vdXNld2hlZWxDb250cm9sIiwidW5sb2NrU3dpcGVUb05leHQiLCJsb2NrU3dpcGVzIiwiZGlzYWJsZU1vdXNld2hlZWxDb250cm9sIiwicmVzaXplIiwid2lkdGgiLCJfaW5pdFN3aXBlciIsIl9kZXN0cm95U3dpcGVyIiwiX2NoZWNrQWN0aW9uU2Nyb2xsIiwiX2NlbnRlckNvbnRlbnQiLCJET01Nb3VzZVNjcm9sbCIsImUiLCJkZWx0YSIsIm9yaWdpbmFsRXZlbnQiLCJkZXRhaWwiLCJfY2hlY2tTY3JvbGwiLCJsb2NrU3dpcGVUb1ByZXYiLCJsb2NrU3dpcGVUb05leHQiLCJtb3VzZXdoZWVsIiwid2hlZWxEZWx0YSIsImNsaWNrIiwic2xpZGVOZXh0Iiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJpbm5lckhlaWdodCIsImRpcmVjdGlvbiIsImVsZW0iLCJoZWlnaHQiLCJlbGVtSW5uZXIiLCJTd2lwZXIiLCJzcGFjZUJldHdlZW4iLCJzcGVlZCIsInNsaWRlc1BlclZpZXciLCJhdXRvSGVpZ2h0IiwibW91c2V3aGVlbENvbnRyb2wiLCJvbkluaXQiLCJzd2lwZXIiLCJ1bmxvY2tTd2lwZXMiLCJkaXNhYmxlS2V5Ym9hcmRDb250cm9sIiwib25TbGlkZUNoYW5nZVN0YXJ0IiwiaW5kZXgiLCJhY3RpdmVJbmRleCIsImhpZGUiLCJzaG93Iiwib25TbGlkZUNoYW5nZUVuZCIsImRlc3Ryb3kiLCJjdXJDb250ZW50IiwiY3VyQ29udGVudElubmVyIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIl9pbml0IiwiX2JvZHkiLCJfb25FdmVudHMiLCJfc2V0U2l6ZSIsImNzcyIsImZvbnQtc2l6ZSIsIm5ld1NpemUiLCJfbWVudUJ0biIsIl9tZW51SXRlbXMiLCJfaHRtbCIsIl9jbG9zZU1lbnUiLCJvdmVyZmxvdy15IiwiYXR0ciIsImhhc0NsYXNzIiwiX29wZW5NZW51IiwiX3N3aXBlcjEiLCJfaGVhZGVyIiwiX2ltZzEiLCJfaW1nMiIsIl9pbWczIiwiX2ltZzQiLCJfaW1nNSIsIl9zdGVwMSIsIl9zdGVwMiIsIl9zdGVwMyIsIl9zdGVwNCIsIl9zdGVwNSIsIm1vdXNlbW92ZSIsInBhZ2VYIiwicGFnZVkiLCJoYWxmV2lkdGgiLCJoYWxmSGVpZ2h0IiwicGVyY2VudEZyb21DZW50ZXJYIiwicGVyY2VudEZyb21DZW50ZXJZIiwib3V0ZXJXaWR0aCIsIl9tb3ZlQm90dG9tIiwiX21vdmVUb3AiLCJuZXh0QnV0dG9uIiwicHJldkJ1dHRvbiIsInhQZXJjZW50IiwieVBlcmNlbnQiLCJzdGVwIiwiaW1hZ2UiLCItd2Via2l0LXRyYW5zZm9ybSIsInRyYW5zZm9ybSIsImNlbnRlcmVkU2xpZGVzIiwiYnJlYWtwb2ludHMiLCIxMDI0IiwiNzY4IiwibG9vcCIsImF1dG9wbGF5IiwiYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiIsIm1hcCIsIm1hcmtlciIsIl9tYXAiLCJfbWFwTGF0IiwiZGF0YSIsIl9tYXBMbmciLCJfbWFwWm9vbSIsIl9idG4iLCJjdXJJdGVtIiwibXlMYXRMbmciLCJsYXQiLCJsbmciLCJzZXRQb3NpdGlvbiIsInNldFRpbWVvdXQiLCJnb29nbGUiLCJtYXBzIiwiZXZlbnQiLCJ0cmlnZ2VyIiwic2V0Q2VudGVyIiwiX2luaXRNYXAiLCJjdXN0b21NYXBUeXBlIiwiU3R5bGVkTWFwVHlwZSIsIm5hbWUiLCJjdXN0b21NYXBUeXBlSWQiLCJNYXAiLCJ6b29tIiwiY2VudGVyIiwibWFwVHlwZUNvbnRyb2xPcHRpb25zIiwibWFwVHlwZUlkcyIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJNYXJrZXIiLCJwb3NpdGlvbiIsIm1hcFR5cGVzIiwic2V0Iiwic2V0TWFwVHlwZUlkIiwiYWRkRG9tTGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFFLHFCQUF1QixXQUU3QixHQUFJRSxHQUFNRixFQUFFRyxTQUloQkgsRUFBRUMsS0FBTUQsRUFBRSxRQUFTLFdBRWYsR0FBSUksR0FBVUosRUFBRUcsU0FJcEJILEVBQUVDLEtBQU1ELEVBQUUsaUJBQWtCLFdBRXhCLEdBQUlLLEdBQU1MLEVBQUVHLFNBSWhCSCxFQUFFQyxLQUFNRCxFQUFFLGdCQUFpQixXQUV2QixHQUFJTSxHQUFZTixFQUFFRyxTQUl0QkgsRUFBRUMsS0FBTUQsRUFBRSxxQkFBc0IsV0FFNUIsR0FBSU8sR0FBaUJQLEVBQUVHLFNBSTNCSCxFQUFFQyxLQUFNRCxFQUFFLGlCQUFrQixXQUV4QixHQUFJUSxHQUFhUixFQUFFRyxTQUl2QkgsRUFBRUMsS0FBTUQsRUFBRSx1QkFBd0IsV0FFOUIsR0FBSVMsR0FBZVQsRUFBRUcsU0FJekJILEVBQUVDLEtBQU1ELEVBQUUsWUFBYSxXQUVuQixHQUFJVSxHQUFlVixFQUFFRyxTQUl6QkgsRUFBRUMsS0FBTUQsRUFBRSxrQkFBbUIsV0FFekIsR0FBSVcsR0FBVVgs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QUNsQ3BCLEVBQUltQyxhQUFhWixJQUdyQjNFLEVBQVEsV0FDSmtFLE9BQU9DLEtBQUtDLE1BQU1vQixlQUFlL0osT0FBUSxPQUFROEksR0FDakRuSSxJQUdSNEQiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19pbmRleC1wYWdlJyApLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQYWdlKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnYm9keScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBab29tU2l0ZSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19oZWFkZXInKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5tYWluLXNsaWRlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmV4cGVydGlzZV9faXRlbXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRXhwZXJ0aXNlU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnNxdWFkX19pdGVtcycpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTcXVhZFNsaWRlciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5vdXItY2xpZW50c19faXRlbXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgQ2xpZW50c1NsaWRlciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5yZXZpZXdzJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IFJldmlld3NTbGlkZXIoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCcuY29udGFjdHNfX21hcCcpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBMb2NhdGlvbiggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuXG4gICAgfSApO1xuXG4gICAgdmFyIFBhZ2UgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9kb20gPSAkKCAnaHRtbCwgYm9keScgKSxcbiAgICAgICAgICAgIF9hY3Rpb25TY3JvbGwgPSBmYWxzZSxcbiAgICAgICAgICAgIF9hY3Rpb25TY3JvbGxUb3AgPSBmYWxzZSxcbiAgICAgICAgICAgIF9hY3Rpb25TY3JvbGxCb3R0b20gPSBmYWxzZSxcbiAgICAgICAgICAgIF9kaXJlY3Rpb24gPSAwLFxuICAgICAgICAgICAgX3N3aXBlckluaXQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9zd2lwZXIsXG4gICAgICAgICAgICBfc3dpcGVyQ29udGVudCA9IF9vYmouZmluZCgnLnN3aXBlci1zbGlkZV9fY29udGVudCcpLFxuICAgICAgICAgICAgX21haW5TbGlkZXIgPSAkKCcubWFpbi1zbGlkZXInKSxcbiAgICAgICAgICAgIF9idG5Eb3duID0gX21haW5TbGlkZXIuZmluZCgnLm1haW4tc2xpZGVyX19idG4tZG93bicpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlckNvbnRlbnQub24oIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdFNsaWRlID0gX29iai5maW5kKCcuc2l0ZV9faW5kZXgtc3dpcGVyIC5zd2lwZXItc2xpZGUtYWN0aXZlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFNsaWRlQ29udGVudCA9IGFjdFNsaWRlLmZpbmQoJy5zd2lwZXItc2xpZGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0U2xpZGVDb250ZW50SW5uZXIgPSBhY3RTbGlkZUNvbnRlbnQuZmluZCgnPmRpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsVG9wKCBhY3RTbGlkZUNvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tBY3Rpb25TY3JvbGxCb3R0b20oIGFjdFNsaWRlQ29udGVudCwgYWN0U2xpZGVDb250ZW50SW5uZXIgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsVG9wICYmICFfYWN0aW9uU2Nyb2xsQm90dG9tICYmIF9kaXJlY3Rpb24gPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIudW5sb2NrU3dpcGVUb1ByZXYoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5lbmFibGVNb3VzZXdoZWVsQ29udHJvbCgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvblNjcm9sbEJvdHRvbSAmJiAhX2FjdGlvblNjcm9sbFRvcCAmJiBfZGlyZWN0aW9uID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLnVubG9ja1N3aXBlVG9OZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX2FjdGlvblNjcm9sbEJvdHRvbSAmJiAhX2FjdGlvblNjcm9sbFRvcCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLmxvY2tTd2lwZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5kaXNhYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49NzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFfc3dpcGVySW5pdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfc3dpcGVySW5pdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGVzdHJveVN3aXBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0U2xpZGUgPSBfb2JqLmZpbmQoJy5zaXRlX19pbmRleC1zd2lwZXIgLnN3aXBlci1zbGlkZS1hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0U2xpZGVDb250ZW50ID0gYWN0U2xpZGUuZmluZCgnLnN3aXBlci1zbGlkZV9fY29udGVudCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RTbGlkZUNvbnRlbnRJbm5lciA9IGFjdFNsaWRlQ29udGVudC5maW5kKCc+ZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tBY3Rpb25TY3JvbGwoIGFjdFNsaWRlQ29udGVudElubmVyICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlckNvbnRlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX3N3aXBlckNvbnRlbnQub24oIHtcbiAgICAgICAgICAgICAgICAgICAgJ0RPTU1vdXNlU2Nyb2xsJzogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIF9kaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvblNjcm9sbFRvcCAmJiAhX2FjdGlvblNjcm9sbEJvdHRvbSAmJiBfZGlyZWN0aW9uID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIubG9ja1N3aXBlVG9QcmV2KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5kaXNhYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsQm90dG9tICYmICFfYWN0aW9uU2Nyb2xsVG9wICYmIF9kaXJlY3Rpb24gPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5sb2NrU3dpcGVUb05leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLmRpc2FibGVNb3VzZXdoZWVsQ29udHJvbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsVG9wICYmICFfYWN0aW9uU2Nyb2xsQm90dG9tICYmIF9kaXJlY3Rpb24gPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci51bmxvY2tTd2lwZVRvUHJldigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsQm90dG9tICYmICFfYWN0aW9uU2Nyb2xsVG9wICYmIF9kaXJlY3Rpb24gPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci51bmxvY2tTd2lwZVRvTmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ21vdXNld2hlZWwnOiBmdW5jdGlvbiAoIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAtMSA6IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIF9kaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvblNjcm9sbFRvcCAmJiAhX2FjdGlvblNjcm9sbEJvdHRvbSAmJiBfZGlyZWN0aW9uID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIubG9ja1N3aXBlVG9QcmV2KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5kaXNhYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsQm90dG9tICYmICFfYWN0aW9uU2Nyb2xsVG9wICYmIF9kaXJlY3Rpb24gPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5sb2NrU3dpcGVUb05leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLmRpc2FibGVNb3VzZXdoZWVsQ29udHJvbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsVG9wICYmICFfYWN0aW9uU2Nyb2xsQm90dG9tICYmIF9kaXJlY3Rpb24gPCAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci51bmxvY2tTd2lwZVRvUHJldigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsQm90dG9tICYmICFfYWN0aW9uU2Nyb2xsVG9wICYmIF9kaXJlY3Rpb24gPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci51bmxvY2tTd2lwZVRvTmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuRG93bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlci5zbGlkZU5leHQoIHRydWUsIDYwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLnN0b3AoIHRydWUsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7IHNjcm9sbFRvcDogX21haW5TbGlkZXIuaW5uZXJIZWlnaHQoKSB9LCAzMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiggZGlyZWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA8IDAgJiYgX2FjdGlvblNjcm9sbFRvcCAmJiBfc3dpcGVySW5pdCApIHtcblxuICAgICAgICAgICAgICAgICAgICBfc3dpcGVyLnVubG9ja1N3aXBlVG9QcmV2KCk7XG4gICAgICAgICAgICAgICAgICAgIF9zd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tBY3Rpb25TY3JvbGwgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuICAgICAgICAgICAgICAgIF9hY3Rpb25TY3JvbGwgPSAoIF93aW5kb3cuc2Nyb2xsVG9wKCkgKyBfd2luZG93LmhlaWdodCgpICkgPj0gZWxlbS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsVG9wID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgICAgICBfYWN0aW9uU2Nyb2xsVG9wID0gZWxlbS5zY3JvbGxUb3AoKSA8PSAwO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsQm90dG9tID0gZnVuY3Rpb24oIGVsZW0sIGVsZW1Jbm5lciApIHtcblxuICAgICAgICAgICAgICAgIF9hY3Rpb25TY3JvbGxCb3R0b20gPSAoIGVsZW0uc2Nyb2xsVG9wKCkgKyBfd2luZG93LmhlaWdodCgpICkgPj0gZWxlbUlubmVyLmlubmVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoJy5zaXRlX19pbmRleC1zd2lwZXInLCB7XG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3ZlcnRpY2FsJyxcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogNzAwLFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgIG1vdXNld2hlZWxDb250cm9sOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBvbkluaXQ6IGZ1bmN0aW9uKCBzd2lwZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RTbGlkZSA9IF9vYmouZmluZCgnLnNpdGVfX2luZGV4LXN3aXBlciAuc3dpcGVyLXNsaWRlLWFjdGl2ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFNsaWRlQ29udGVudCA9IGFjdFNsaWRlLmZpbmQoJy5zd2lwZXItc2xpZGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RTbGlkZUNvbnRlbnRJbm5lciA9IGFjdFNsaWRlLmZpbmQoJy5zd2lwZXItc2xpZGVfX2NvbnRlbnQ+ZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9kaXJlY3Rpb24gPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tBY3Rpb25TY3JvbGwoIGFjdFNsaWRlQ29udGVudElubmVyICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tBY3Rpb25TY3JvbGxUb3AoIGFjdFNsaWRlQ29udGVudCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsQm90dG9tKCBhY3RTbGlkZUNvbnRlbnQsIGFjdFNsaWRlQ29udGVudElubmVyICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfYWN0aW9uU2Nyb2xsICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLnVubG9ja1N3aXBlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci5lbmFibGVNb3VzZXdoZWVsQ29udHJvbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLmxvY2tTd2lwZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuZGlzYWJsZU1vdXNld2hlZWxDb250cm9sKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLmRpc2FibGVLZXlib2FyZENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggX2RpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25TbGlkZUNoYW5nZVN0YXJ0OiBmdW5jdGlvbiggc3dpcGVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL19zd2lwZXJDb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHN3aXBlci5hY3RpdmVJbmRleDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGluZGV4ID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2dvX2luZGV4JykuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmxvZ29faW5kZXgnKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uU2xpZGVDaGFuZ2VFbmQ6IGZ1bmN0aW9uKHN3aXBlcikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0U2xpZGUgPSBfb2JqLmZpbmQoJy5zaXRlX19pbmRleC1zd2lwZXIgLnN3aXBlci1zbGlkZS1hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RTbGlkZUNvbnRlbnQgPSBhY3RTbGlkZS5maW5kKCcuc3dpcGVyLXNsaWRlX19jb250ZW50JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0U2xpZGVDb250ZW50SW5uZXIgPSBhY3RTbGlkZS5maW5kKCcuc3dpcGVyLXNsaWRlX19jb250ZW50PmRpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlyZWN0aW9uID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsKCBhY3RTbGlkZUNvbnRlbnRJbm5lciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrQWN0aW9uU2Nyb2xsVG9wKCBhY3RTbGlkZUNvbnRlbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja0FjdGlvblNjcm9sbEJvdHRvbSggYWN0U2xpZGVDb250ZW50LCBhY3RTbGlkZUNvbnRlbnRJbm5lciApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2FjdGlvblNjcm9sbCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci51bmxvY2tTd2lwZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2lwZXIuZW5hYmxlTW91c2V3aGVlbENvbnRyb2woKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci5sb2NrU3dpcGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpcGVyLmRpc2FibGVNb3VzZXdoZWVsQ29udHJvbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXBlci5kaXNhYmxlS2V5Ym9hcmRDb250cm9sKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIF9kaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIF9zd2lwZXJDb250ZW50LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99LCA2MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Rlc3Ryb3lTd2lwZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9zd2lwZXIuZGVzdHJveSggdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2VudGVyQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9zd2lwZXJDb250ZW50LmVhY2goIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJDb250ZW50ID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckNvbnRlbnRJbm5lciA9IGN1ckNvbnRlbnQuZmluZCgnPmRpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJDb250ZW50LmlubmVySGVpZ2h0KCkgPiBjdXJDb250ZW50SW5uZXIuaW5uZXJIZWlnaHQoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ29udGVudC5hZGRDbGFzcygnY2VudGVyZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJDb250ZW50LnJlbW92ZUNsYXNzKCdjZW50ZXJlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PTc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggIV9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBab29tU2l0ZSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKHdpbmRvdyksXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRTaXplKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYm9keS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICc3NXB4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3NldFNpemUoKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciBuZXdTaXplO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuaGVpZ2h0KCkgPiA1MDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9ICggMTAwICogKCB3aW5kb3cuaW5uZXJIZWlnaHQgLyA5MDAgKSApICsgJ3B4JztcblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBuZXdTaXplID0gKCAxMDAgKiAoIDUwMCAvIDkwMCApICkgKyAncHgnO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2JvZHkuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiBuZXdTaXplXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93KSxcbiAgICAgICAgICAgIF9tZW51QnRuID0gX29iai5maW5kKCcuc2l0ZV9faGVhZGVyX19idG4nKSxcbiAgICAgICAgICAgIF9tZW51SXRlbXMgPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXItbWVudScpLFxuICAgICAgICAgICAgX2h0bWwgPSAkKCdodG1sJyksXG4gICAgICAgICAgICBfYm9keSA9ICQoJ2JvZHknKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcbiAgICAgICAgICAgICAgICBfaHRtbC5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bydcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2JvZHkuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15JzogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9tZW51SXRlbXMuYXR0ciggJ3N0eWxlJywgJycgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcblxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9vYmouaGFzQ2xhc3MoICdvcGVuZWQnICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBfbWVudUJ0bi5vbigge1xuXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCAnb3BlbmVkJyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlTWVudSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAnb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuXG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIE1haW5TbGlkZXIgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9oZWFkZXIgPSAkKCAnLnNpdGVfX2hlYWRlcicpLFxuICAgICAgICAgICAgX2ltZzEgPSBfb2JqLmZpbmQoICcudmVnZXRhYmxlMScgKSxcbiAgICAgICAgICAgIF9pbWcyID0gX29iai5maW5kKCAnLnZlZ2V0YWJsZTInKSxcbiAgICAgICAgICAgIF9pbWczID0gX29iai5maW5kKCAnLnZlZ2V0YWJsZTMnKSxcbiAgICAgICAgICAgIF9pbWc0ID0gX29iai5maW5kKCAnLnZlZ2V0YWJsZTQnKSxcbiAgICAgICAgICAgIF9pbWc1ID0gX29iai5maW5kKCAnLnZlZ2V0YWJsZTUnKSxcbiAgICAgICAgICAgIF9zdGVwMSA9IDE1LFxuICAgICAgICAgICAgX3N0ZXAyID0gMTAsXG4gICAgICAgICAgICBfc3RlcDMgPSA1LFxuICAgICAgICAgICAgX3N0ZXA0ID0gMjAsXG4gICAgICAgICAgICBfc3RlcDUgPSAyNSxcbiAgICAgICAgICAgIF9zd2lwZXIxO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIG1vdXNlbW92ZTogZnVuY3Rpb24oIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93LndpZHRoKCkgPiAxMDI0ICYmICEoIF9oZWFkZXIuaGFzQ2xhc3MoJ29wZW5lZCcpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVggPSBlLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlWSA9IGUucGFnZVksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbGZXaWR0aCA9IF9vYmoud2lkdGgoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbGZIZWlnaHQgPSBfb2JqLmhlaWdodCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudEZyb21DZW50ZXJYID0gKCBwYWdlWCAtIGhhbGZXaWR0aCApIC8gaGFsZldpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50RnJvbUNlbnRlclkgPSAoIHBhZ2VZIC0gaGFsZkhlaWdodCApIC8gaGFsZkhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93Lm91dGVyV2lkdGgoKSA+IDc2OCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tb3ZlQm90dG9tKHBlcmNlbnRGcm9tQ2VudGVyWCwgcGVyY2VudEZyb21DZW50ZXJZLCBfc3RlcDEsX2ltZzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbW92ZVRvcChwZXJjZW50RnJvbUNlbnRlclgsIHBlcmNlbnRGcm9tQ2VudGVyWSwgX3N0ZXAyLF9pbWcyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21vdmVUb3AocGVyY2VudEZyb21DZW50ZXJYLCBwZXJjZW50RnJvbUNlbnRlclksIF9zdGVwMyxfaW1nMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tb3ZlQm90dG9tKHBlcmNlbnRGcm9tQ2VudGVyWCwgcGVyY2VudEZyb21DZW50ZXJZLCBfc3RlcDQsX2ltZzQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbW92ZUJvdHRvbShwZXJjZW50RnJvbUNlbnRlclgsIHBlcmNlbnRGcm9tQ2VudGVyWSwgX3N0ZXA1LF9pbWc1KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9faW1nQm90dG9tLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICd0cmFuc2xhdGUoIDAsIDAgKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICd0cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCAwLCAwICknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyMSA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMCxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1uZXh0JylbMF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tcHJldicpWzBdXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21vdmVCb3R0b20gPSBmdW5jdGlvbiggeFBlcmNlbnQsIHlQZXJjZW50LCBzdGVwLCBpbWFnZSApIHtcblxuICAgICAgICAgICAgICAgIGltYWdlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCAnICsgLSggeFBlcmNlbnQgKiBzdGVwICkgKyAncHgsJyArIC0oIHlQZXJjZW50ICogc3RlcCApICsgJ3B4ICknLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSggJyArIC0oIHhQZXJjZW50ICogc3RlcCApICsgJ3B4LCAnICsgLSggeVBlcmNlbnQgKiBzdGVwICkgKyAncHggICknXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21vdmVUb3AgPSBmdW5jdGlvbiggeFBlcmNlbnQsIHlQZXJjZW50LCBzdGVwLCBpbWFnZSApIHtcblxuICAgICAgICAgICAgICAgIGltYWdlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNsYXRlKCAnICsgKCB4UGVyY2VudCAqIHN0ZXAgKSArICdweCAsJyArICggeVBlcmNlbnQgKiBzdGVwICkgKyAncHggICknLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSggJyArICggeFBlcmNlbnQgKiBzdGVwICkgKyAncHggLCAnICsgKCB5UGVyY2VudCAqIHN0ZXAgKSArICdweCAgKSdcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIEV4cGVydGlzZVNsaWRlciA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3N3aXBlckluaXQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9zd2lwZXI7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIV9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZXN0cm95U3dpcGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS45LFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9kZXN0cm95U3dpcGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyLmRlc3Ryb3koIHRydWUsIHRydWUpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICFfc3dpcGVySW5pdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBTcXVhZFNsaWRlciA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3N3aXBlckluaXQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9zd2lwZXI7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIV9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZXN0cm95U3dpcGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zd2lwZXJJbml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMS43NSxcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWVcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZGVzdHJveVN3aXBlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlci5kZXN0cm95KCB0cnVlLCB0cnVlKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpIDwgNzY4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgQ2xpZW50c1NsaWRlciA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX3N3aXBlcjtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0U3dpcGVyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfc3dpcGVyID0gbmV3IFN3aXBlciggX29iai5maW5kKCAnLnN3aXBlci1jb250YWluZXInICksIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1uZXh0JylbMF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tcHJldicpWzBdLFxuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgMTAyNDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFJldmlld3NTbGlkZXIgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9zd2lwZXI7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiA3MDAwLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX29iai5maW5kKCcuc3dpcGVyLWJ1dHRvbi1uZXh0JylbMF0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tcHJldicpWzBdXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBMb2NhdGlvbiA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX21hcCA9IF9vYmouZmluZCgnI2NvbnRhY3QtZ29vZ2xlLW1hcCcpLFxuICAgICAgICAgICAgX21hcExhdCA9IF9tYXAuZGF0YSgnbWFwLWxhdCcpLFxuICAgICAgICAgICAgX21hcExuZyA9IF9tYXAuZGF0YSgnbWFwLWxuZycpLFxuICAgICAgICAgICAgX21hcFpvb20gPSBfbWFwLmRhdGEoJ21hcC16b29tJyksXG4gICAgICAgICAgICBfYnRuID0gJCgnLmNvbnRhY3RzX19jaXRpZXMgLmJ0bicpLFxuICAgICAgICAgICAgbWFwLFxuICAgICAgICAgICAgbWFya2VyO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX2J0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhKGN1ckl0ZW0uaGFzQ2xhc3MoJ2FjdGl2ZScpKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9idG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ckl0ZW0uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG15TGF0TG5nID0ge2xhdDogJCh0aGlzKS5kYXRhKCdtYXAtbGF0JyksIGxuZzogJCh0aGlzKS5kYXRhKCdtYXAtbG5nJyl9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlci5zZXRQb3NpdGlvbihteUxhdExuZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtYXAsICdyZXNpemUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldENlbnRlcihteUxhdExuZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21NYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoW1xuICAgICAgICAgICAgICAgICAgICAvL3tcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgc3R5bGVyczogW1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAge2h1ZTogJyNmNmQzOGEnfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIHt2aXNpYmlsaXR5OiAnc2ltcGxpZmllZCd9LFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAge2dhbW1hOiAxfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIHt3ZWlnaHQ6IDF9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIF1cbiAgICAgICAgICAgICAgICAgICAgLy99LFxuICAgICAgICAgICAgICAgICAgICAvL3tcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgLy9mZWF0dXJlVHlwZTogJ3dhdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgLy9zdHlsZXJzOiBbe2NvbG9yOiAnI2YyZGNhZCd9XVxuICAgICAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICBdLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdDdXN0b20gU3R5bGUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGN1c3RvbU1hcFR5cGVJZCA9ICdjdXN0b21fc3R5bGUnO1xuXG4gICAgICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcCggX21hcFswXSwge1xuICAgICAgICAgICAgICAgICAgICB6b29tOiBfbWFwWm9vbSxcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB7bGF0OiBfbWFwTGF0LCBsbmc6IF9tYXBMbmd9LFxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlQ29udHJvbE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZHM6IFtnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCwgY3VzdG9tTWFwVHlwZUlkXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHtsYXQ6IF9tYXBMYXQsIGxuZzogX21hcExuZ30sXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtYXAubWFwVHlwZXMuc2V0KGN1c3RvbU1hcFR5cGVJZCwgY3VzdG9tTWFwVHlwZSk7XG4gICAgICAgICAgICAgICAgbWFwLnNldE1hcFR5cGVJZChjdXN0b21NYXBUeXBlSWQpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsIF9pbml0TWFwKTtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxufSApKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
