"use strict";!function(){$(function(){new e($(".preloader")),$.each($(".site__index-page"),function(){new t($(this))}),$.each($("body"),function(){new n($(this))}),$.each($(".site__header"),function(){new i($(this))}),$.each($(".main-slider"),function(){new o($(this))}),$.each($(".expertise__items"),function(){new s($(this))}),$.each($(".reviews"),function(){new r($(this))}),$.each($(".contacts__map"),function(){new l($(this))}),$.each($(".case .main-slider__btn-down"),function(){new a($(this))})});var e=function(e){var t=this,n=$(window),i=e,o=$("body"),s=function(){n.on({load:function(){r()}})},a=function(){o[0].preloader=t,s()},r=function(){i.addClass("preloader_loaded"),setTimeout(function(){i.remove(),$(".site").addClass("site__loaded")},500)};a()},t=function(e){var t=this,n=e,i=$(window),o=$("html, body"),s=!1,a=(n.find(".slide__content"),$(".main-slider")),r=a.find(".main-slider__btn-down"),l=function(){i.on({load:function(){i.width()>=1024&&(s||(d(),f(),s=!0))},resize:function(){i.width()>=1024?(s||(d(),s=!0),f()):s&&(c(),s=!1)}}),r.on({click:function(){return i.width()>=1024?(console.log(300),$(this).parents(".case").length?(console.log("case"),o.stop(!0,!1),o.animate({scrollTop:a.innerHeight()},300)):$.fn.fullpage.moveTo(2)):(o.stop(!0,!1),o.animate({scrollTop:a.innerHeight()},300)),!1}})},d=function(){$("#fullpage").fullpage({scrollOverflow:!0,sectionSelector:".slide__content",onLeave:function(e,t,n,i,o){t>1?$(".logo_index").hide():$(".logo_index").show();var s=$(".slide__content").eq(t-1).find(".slide__content-inner>div>div");s.hasClass("reviews")&&s.find(".reviews__item").addClass("animation")}})},c=function(){$.fn.fullpage.destroy("all")},f=function(){},p=function(){n[0].obj=t,l()};p()},n=function(e){var t=this,n=e,i=$(window),o=$("body"),s=function(){i.on({resize:function(){i.width()>=768?r():o.css({"font-size":"20px"})}})},a=function(){s(),i.width()>=768&&r(),n[0].obj=t},r=function(){var e;e=i.height()>500?100*(window.innerHeight/900)/5+"px":100*(500/900)/5+"px",o.css({"font-size":e})};a()},i=function(e){var t=this,n=e,i=$(window),o=n.find(".site__header__btn"),s=n.find(".site__header-menu"),a=$("html"),r=$("body"),l=function(){n.removeClass("opened"),i.width()<1024&&(a.css({"overflow-y":"auto"}),r.css({"overflow-y":"auto"})),s.attr("style","")},d=function(){i.on({scroll:function(){i.scrollTop()>0?n.addClass("fixed"):n.removeClass("fixed")}}),o.on({click:function(){return n.hasClass("opened")?l():c(),!1}})},c=function(){n.addClass("opened"),i.width()<1024&&(a.css({"overflow-y":"hidden"}),r.css({"overflow-y":"hidden"}))},f=function(){d(),n[0].obj=t,i.scrollTop()>n.innerHeight()?n.addClass("fixed"):n.removeClass("fixed")};f()},o=function(e){var t,n=this,i=e,o=$(window),s=$(".site__header"),a=15,r=10,l=5,d=20,c=25,f=function(){$(document).on("mousemove",".main-slider .swiper-slide",function(e){e=e||window.event;var t=$(this),n=t.find(".move1"),f=t.find(".move2"),p=t.find(".move3"),g=t.find(".move4"),m=t.find(".move5");if(o.width()>1024&&!s.hasClass("opened")){var w=e.pageX,_=e.pageY,v=i.width()/2,y=i.height()/2,b=(w-v)/v,C=(_-y)/y;o.outerWidth()>1024&&(h(b,C,a,n),h(b,C,a,$(document).find(".copy_1")),u(b,C,r,f),u(b,C,r,$(document).find(".copy_2")),u(b,C,l,p),u(b,C,l,$(document).find(".copy_3")),h(b,C,d,g),h(b,C,d,$(document).find(".copy_4")),h(b,C,c,m),h(b,C,c,$(document).find(".copy_5")))}}),o.on({load:function(){p()},resize:function(){if(o.width()>=1024&&screen.width>=1024&&(i.attr("style",""),$(".vegetables").attr("style","")),i.hasClass("main-slider_index")){var e=i.parents(".slide__content").next().find(".slide__content-inner"),t=i.find(".swiper-slide-active").innerHeight();setTimeout(function(){i.find(".swiper-slide-active .vegetables").each(function(){var n=$(this),i=n.position().top,o=n.height();if(i+o>t){var s=n.attr("class").replace(/(^.+\D)(\d+)(\D.+$)/i,"$2"),a=0;if($(".copy_move.copy_"+s).length){var r=$(".copy_move.copy_"+s);$(".slide__content").innerHeight()<$(".main-slider").innerHeight()&&(a=$(".main-slider").innerHeight()-$(".slide__content").innerHeight()),r.offset({top:n.offset().top-a,left:n.offset().left}),r.css({bottom:"auto",right:"auto"})}else{var l=n.clone(!0);l.addClass("copy_move copy_"+s),e.prepend(l),$(".slide__content").innerHeight()<$(".main-slider").innerHeight()&&(a=$(".main-slider").innerHeight()-$(".slide__content").innerHeight()),l.offset({top:n.offset().top-a,left:n.offset().left}),l.css({bottom:"auto",right:"auto"})}}else{var s=n.attr("class").replace(/(^.+\D)(\d+)(\D.+$)/i,"$2");$("copy_move copy_"+s).remove()}})},1500)}}}),window.addEventListener("orientationchange",function(){setTimeout(function(){screen.width<1024&&g()},500)},!1)},p=function(){t=new Swiper(i.find(".swiper-container"),{spaceBetween:0,slidesPerView:1,loop:!0,speed:700,effect:"fade",fade:{crossFade:!0},autoplayDisableOnInteraction:!1,nextButton:i.find(".swiper-button-next")[0],prevButton:i.find(".swiper-button-prev")[0],onInit:function(e){var t=e.slides.filter(".swiper-slide-active"),n=t.parents(".slide__content").index(),o=$(".slide__content").eq(n+1);if(i.hasClass("main-slider_index")){var s=t.innerHeight();t.find(".vegetables").each(function(){var e=$(this),t=e.position().top,n=e.height();if(t+n>s){var i=e.attr("class").replace(/(^.+\D)(\d+)(\D.+$)/i,"$2"),a=0,r=e.clone(!0);r.addClass("copy_move copy_"+i),o.prepend(r),$(".slide__content").innerHeight()<$(".main-slider").innerHeight()&&(a=$(".main-slider").innerHeight()-$(".slide__content").innerHeight()),r.offset({top:e.offset().top-a,left:e.offset().left}),r.css({bottom:"auto",right:"auto"})}})}},onSlideChangeStart:function(e){var t=e.slides.filter(".swiper-slide-active"),n=t.parents(".slide__content").index();$(".slide__content").eq(n+1).find(".slide__content-inner");$(".copy_move").remove()},onSlideChangeEnd:function(e){var t=e.slides.filter(".swiper-slide-active"),n=t.parents(".slide__content").index(),o=$(".slide__content").eq(n+1).find(".slide__content-inner");if(i.hasClass("main-slider_index")){var s=t.innerHeight();t.find(".vegetables").each(function(){var e=$(this),t=e.position().top,n=e.height();if(t+n>s){var i=e.attr("class").replace(/(^.+\D)(\d+)(\D.+$)/i,"$2"),a=0,r=e.clone(!0);r.addClass("copy_move copy_"+i),o.prepend(r),$(".slide__content").innerHeight()<$(".main-slider").innerHeight()&&(a=$(".main-slider").innerHeight()-$(".slide__content").innerHeight()),r.offset({top:e.offset().top-a,left:e.offset().left}),r.css({bottom:"auto",right:"auto"})}})}}})},h=function(e,t,n,i){i.css({"-webkit-transform":"translate( "+-(e*n)+"px,"+-(t*n)+"px )",transform:"translate( "+-(e*n)+"px, "+-(t*n)+"px  )"})},u=function(e,t,n,i){i.css({"-webkit-transform":"translate( "+e*n+"px ,"+t*n+"px  )",transform:"translate( "+e*n+"px , "+t*n+"px  )"})},g=function(){var e=o.height();i.innerHeight(e)},m=function(){i[0].obj=n,f(),o.width()<1024&&g()};m()},s=function(e){var t,n=this,i=e,o=$(window),s=!1,a=function(){o.on({resize:function(){o.width()<768?s||(r(),s=!0):s&&(l(),s=!1)}})},r=function(){t=new Swiper(i.find(".swiper-container"),{slidesPerView:1.9,centeredSlides:!0})},l=function(){t.destroy(!0,!0)},d=function(){i[0].obj=n,a(),o.width()<768&&(s||(r(),s=!0))};d()},a=function(e){var t=this,n=e,i=$("html, body"),o=$(".main-slider__inner-pic"),s=function(){n.on({click:function(){return console.log(300),i.animate({scrollTop:o.innerHeight()},300),!1}})},a=function(){n[0].obj=t,s()};a()},r=function(e){var t,n=this,i=e,o=$(window),s=function(){o.on({resize:function(){}})},a=function(){t=new Swiper(i.find(".swiper-container"),{slidesPerView:1,spaceBetween:30,loop:!0,speed:500,effect:"fade",fade:{crossFade:!0},autoplayDisableOnInteraction:!1,nextButton:i.find(".swiper-button-next")[0],prevButton:i.find(".swiper-button-prev")[0]})},r=function(){i[0].obj=n,s(),a()};r()},l=function(e){var t,n,i=e,o=i.find("#contact-google-map"),s=o.data("map-lat"),a=o.data("map-lng"),r=o.data("map-zoom"),l=$(".contacts__cities .btn"),d=$(window),c=function(){d.on({load:function(){u()},resize:function(){u()}}),google.maps.event.addDomListener(window,"resize",function(){if(l.length){var e={lat:l.filter(".active").data("map-lat"),lng:l.filter(".active").data("map-lng")};t.setCenter(e),f(t.getCenter(),0,50)}}),l.on({click:function(){var e=$(this);if(!e.hasClass("active")){l.removeClass("active"),e.addClass("active");var i={lat:$(this).data("map-lat"),lng:$(this).data("map-lng")};n.setPosition(i),setTimeout(function(){google.maps.event.trigger(t,"resize"),t.setCenter(i),f(t.getCenter(),0,50)},300)}return!1}})},f=function(e,n,i){var o=Math.pow(2,t.getZoom()),s=t.getProjection().fromLatLngToPoint(e),a=new google.maps.Point(n/o||0,i/o||0),r=new google.maps.Point(s.x-a.x,s.y+a.y),l=t.getProjection().fromPointToLatLng(r);t.setCenter(l)},p=function(){var e=new google.maps.StyledMapType([{stylers:[{hue:"#b00040"},{saturation:60},{lightness:-40}]},{elementType:"labels.text.fill",stylers:[{color:"#ff6fa4"}]},{featureType:"water",stylers:[{color:"#B61530"}]},{featureType:"road",stylers:[{color:"#B61530"},{}]},{featureType:"road.local",stylers:[{color:"#B61530"},{lightness:6}]},{featureType:"road.highway",stylers:[{color:"#B61530"},{lightness:-25}]},{featureType:"road.arterial",stylers:[{color:"#B61530"},{lightness:-10}]},{featureType:"transit",stylers:[{color:"#B61530"},{lightness:70}]},{featureType:"transit.line",stylers:[{color:"#B61530"},{lightness:90}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#ff6fa4"}]}],{name:"Custom Style"}),i="custom_style";t=new google.maps.Map(o[0],{zoom:r,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,center:{lat:s,lng:a},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,i]}}),n=new google.maps.Marker({position:{lat:s,lng:a},map:t}),t.mapTypes.set(i,e),t.setMapTypeId(i),google.maps.event.addListenerOnce(t,"idle",function(){if(l.length){var e={lat:l.filter(".active").data("map-lat"),lng:l.filter(".active").data("map-lng")};t.setCenter(e),f(t.getCenter(),0,50)}})},h=function(){google.maps.event.addDomListener(window,"load",p),c(),u()},u=function(){var e=$(".contacts__info");d.width()>=768?(e.innerHeight()>e.innerWidth()?(i.height(e.innerHeight()+.25*e.innerHeight()),i.width(e.innerHeight()+.25*e.innerHeight())):(i.height(e.innerWidth()+.25*e.innerWidth()),i.width(e.innerWidth()+.25*e.innerWidth())),e.parents(".contacts").hasClass("contacts_2")&&(e.innerHeight()>e.innerWidth()?(i.height(e.innerHeight()+.6*e.innerHeight()),i.width(e.innerHeight()+.6*e.innerHeight())):(i.height(e.innerWidth()+.6*e.innerWidth()),i.width(e.innerWidth()+.6*e.innerWidth())))):i.attr("style","")};h()}}();
!function(){$(function(){"use strict";$.each($(".contacts__form"),function(){new t($(this))})});var t=function(t){var n=this,e=t,a=e.find("form"),i=e.find("input:required, textarea:required"),s=e.find(".contacts__fields-error"),o=e.find(".contacts__fields-textarea"),r=e.find(".contacts__fields-textarea-height"),c=$(".contacts__success .btn"),u=($("html, body"),new XMLHttpRequest),d=function(){var t=a.attr("data-action");return u.abort(),u=$.ajax({url:t,data:a.serialize(),dataType:"json",timeout:2e4,type:"GET",success:function(t){e.addClass("hidden"),i.val(""),o.attr("style",""),r.html("")},error:function(t){"abort"!=t.statusText&&alert("Error")}}),!1},f=function(){h(),e[0].obj=n},l=function(){i.each(function(){""===$(this).val()&&$(this).addClass("not-touched")}),i.each(function(){_($(this))})},h=function(){a.on({submit:function(){return l(),i.hasClass("not-touched")?(e.find(".not-touched:first").focus(),s.text(e.find(".not-touched:first").data("error")),s.addClass("visible")):(s.removeClass("visible"),d()),!1}}),i.on({focus:function(){},keypress:function(){$(this).removeClass("not-touched"),s.removeClass("visible")},keyup:function(){_($(this))}}),c.on({click:function(){return e.removeClass("hidden"),!1}}),o.on({keyup:function(){var t=$(this).find("textarea").val();return r.html(t),o.css("height",r.innerHeight()),!1}})},v=function(t){t.addClass("not-valid"),t.removeClass("valid")},m=function(t){t.removeClass("not-valid"),t.addClass("valid")},C=function(t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(t)},_=function(t,n){var e=t.attr("type");return("email"!==e&&"text"!==e||""!==t.val())&&("email"!==e||C(t.val()))?void m(t):(v(t),!1)};n.checkValid=function(){var t=!0;return i.each(function(){$(this).removeClass("not-touched"),$(this).hasClass("not-valid")&&(t=!1)}),t},f()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmZvcm0udmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbIiQiLCJQcmVsb2FkZXIiLCJlYWNoIiwiUGFnZSIsInRoaXMiLCJab29tU2l0ZSIsIk1lbnUiLCJNYWluU2xpZGVyIiwiRXhwZXJ0aXNlU2xpZGVyIiwiUmV2aWV3c1NsaWRlciIsIkxvY2F0aW9uIiwiU2Nyb2xsRG93biIsIm9iaiIsIl9zZWxmIiwiX3dpbmRvdyIsIndpbmRvdyIsIl9wcmVsb2FkZXIiLCJfYm9keSIsIl9hZGRFdmVudHMiLCJvbiIsImxvYWQiLCJfc2hvd1NpdGUiLCJfaW5pdCIsInByZWxvYWRlciIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9vYmoiLCJfZG9tIiwiX3N3aXBlckluaXQiLCJfbWFpblNsaWRlciIsImZpbmQiLCJfYnRuRG93biIsIndpZHRoIiwiX2luaXRGdWxsUGFnZSIsIl9jZW50ZXJDb250ZW50IiwicmVzaXplIiwiX2Rlc3Ryb3lGdWxsUGFnZSIsImNsaWNrIiwiY29uc29sZSIsImxvZyIsInBhcmVudHMiLCJsZW5ndGgiLCJzdG9wIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImlubmVySGVpZ2h0IiwiZm4iLCJmdWxscGFnZSIsIm1vdmVUbyIsInNjcm9sbE92ZXJmbG93Iiwic2VjdGlvblNlbGVjdG9yIiwib25MZWF2ZSIsImFuY2hvckxpbmsiLCJpbmRleCIsInNsaWRlSW5kZXgiLCJkaXJlY3Rpb24iLCJuZXh0U2xpZGVJbmRleCIsImhpZGUiLCJzaG93IiwiYmxvY2siLCJlcSIsImhhc0NsYXNzIiwiZGVzdHJveSIsIl9vbkV2ZW50cyIsIl9zZXRTaXplIiwiY3NzIiwiZm9udC1zaXplIiwibmV3U2l6ZSIsImhlaWdodCIsIl9tZW51QnRuIiwiX21lbnVJdGVtcyIsIl9odG1sIiwiX2Nsb3NlTWVudSIsInJlbW92ZUNsYXNzIiwib3ZlcmZsb3cteSIsImF0dHIiLCJzY3JvbGwiLCJfb3Blbk1lbnUiLCJfc3dpcGVyMSIsIl9oZWFkZXIiLCJfc3RlcDEiLCJfc3RlcDIiLCJfc3RlcDMiLCJfc3RlcDQiLCJfc3RlcDUiLCJkb2N1bWVudCIsImUiLCJldmVudCIsInNsaWRlIiwiX2ltZzEiLCJfaW1nMiIsIl9pbWczIiwiX2ltZzQiLCJfaW1nNSIsInBhZ2VYIiwicGFnZVkiLCJoYWxmV2lkdGgiLCJoYWxmSGVpZ2h0IiwicGVyY2VudEZyb21DZW50ZXJYIiwicGVyY2VudEZyb21DZW50ZXJZIiwib3V0ZXJXaWR0aCIsIl9tb3ZlQm90dG9tIiwiX21vdmVUb3AiLCJfaW5pdFN3aXBlciIsInNjcmVlbiIsIm5leHRTZWN0aW9uIiwibmV4dCIsInZlZ2V0YWJsZSIsInBvcyIsInBvc2l0aW9uIiwidG9wIiwiaGVpZ2h0VmVnIiwibnVtIiwicmVwbGFjZSIsImRpZmYiLCJvbGRJbWciLCJvZmZzZXQiLCJsZWZ0IiwiYm90dG9tIiwicmlnaHQiLCJuZXdJbWciLCJjbG9uZSIsInByZXBlbmQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3NldEhlaWdodCIsIlN3aXBlciIsInNwYWNlQmV0d2VlbiIsInNsaWRlc1BlclZpZXciLCJsb29wIiwic3BlZWQiLCJlZmZlY3QiLCJmYWRlIiwiY3Jvc3NGYWRlIiwiYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwib25Jbml0Iiwic3dpcGVyIiwiYWN0U2xpZGUiLCJzbGlkZXMiLCJmaWx0ZXIiLCJzZWN0aW9uSW5kZXgiLCJvblNsaWRlQ2hhbmdlU3RhcnQiLCJvblNsaWRlQ2hhbmdlRW5kIiwieFBlcmNlbnQiLCJ5UGVyY2VudCIsInN0ZXAiLCJpbWFnZSIsIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiX3N3aXBlciIsIl9kZXN0cm95U3dpcGVyIiwiY2VudGVyZWRTbGlkZXMiLCJfc2Nyb2xsZXIiLCJfbWFpblNsaWRlclBpYyIsIm1hcCIsIm1hcmtlciIsIl9tYXAiLCJfbWFwTGF0IiwiZGF0YSIsIl9tYXBMbmciLCJfbWFwWm9vbSIsIl9idG4iLCJnb29nbGUiLCJtYXBzIiwiYWRkRG9tTGlzdGVuZXIiLCJteUxhdExuZyIsImxhdCIsImxuZyIsInNldENlbnRlciIsIl9vZmZzZXRDZW50ZXIiLCJnZXRDZW50ZXIiLCJjdXJJdGVtIiwic2V0UG9zaXRpb24iLCJ0cmlnZ2VyIiwibGF0bG5nIiwib2Zmc2V0eCIsIm9mZnNldHkiLCJzY2FsZSIsIk1hdGgiLCJwb3ciLCJnZXRab29tIiwid29ybGRDb29yZGluYXRlQ2VudGVyIiwiZ2V0UHJvamVjdGlvbiIsImZyb21MYXRMbmdUb1BvaW50IiwicGl4ZWxPZmZzZXQiLCJQb2ludCIsIndvcmxkQ29vcmRpbmF0ZU5ld0NlbnRlciIsIngiLCJ5IiwibmV3Q2VudGVyIiwiZnJvbVBvaW50VG9MYXRMbmciLCJfaW5pdE1hcCIsImN1c3RvbU1hcFR5cGUiLCJTdHlsZWRNYXBUeXBlIiwic3R5bGVycyIsImh1ZSIsInNhdHVyYXRpb24iLCJsaWdodG5lc3MiLCJlbGVtZW50VHlwZSIsImNvbG9yIiwiZmVhdHVyZVR5cGUiLCJ2aXNpYmlsaXR5IiwibmFtZSIsImN1c3RvbU1hcFR5cGVJZCIsIk1hcCIsInpvb20iLCJ6b29tQ29udHJvbCIsIm1hcFR5cGVDb250cm9sIiwic2NhbGVDb250cm9sIiwic3RyZWV0Vmlld0NvbnRyb2wiLCJyb3RhdGVDb250cm9sIiwiY2VudGVyIiwibWFwVHlwZUNvbnRyb2xPcHRpb25zIiwibWFwVHlwZUlkcyIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJNYXJrZXIiLCJtYXBUeXBlcyIsInNldCIsInNldE1hcFR5cGVJZCIsImFkZExpc3RlbmVyT25jZSIsImNvbnRlbnQiLCJpbm5lcldpZHRoIiwiRm9ybVZhbGlkYXRvciIsIl9mb3JtIiwiX2ZpZWxkcyIsIl9lcnJvck1lc3NhZ2UiLCJfdGV4dGFyZWFGaWVsZCIsIl90ZXh0YXJlYUhlaWdodCIsIl9idG5TdWNjZXNzIiwiX3JlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIl9hamF4UmVxdWVzdCIsInBhdGgiLCJhYm9ydCIsImFqYXgiLCJ1cmwiLCJzZXJpYWxpemUiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJ0eXBlIiwic3VjY2VzcyIsIm1zZyIsInZhbCIsImh0bWwiLCJlcnJvciIsInN0YXR1c1RleHQiLCJhbGVydCIsIl9jb25zdHJ1Y3RvciIsIl9hZGROb3RUb3VjaGVkQ2xhc3MiLCJfdmFsaWRhdGVGaWVsZCIsInN1Ym1pdCIsImZvY3VzIiwidGV4dCIsImtleXByZXNzIiwia2V5dXAiLCJ2YWx1ZSIsIl9tYWtlTm90VmFsaWQiLCJmaWVsZCIsIl9tYWtlVmFsaWQiLCJfdmFsaWRhdGVFbWFpbCIsImVtYWlsIiwicmUiLCJ0ZXN0IiwiY2hlY2tWYWxpZCIsInZhbGlkIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUNBLFdBRUlBLEVBQUcsV0FFQyxHQUFJQyxHQUFXRCxFQUFFLGVBRWpCQSxFQUFFRSxLQUFNRixFQUFFLHFCQUF1QixXQUU3QixHQUFJRyxHQUFNSCxFQUFFSSxTQUloQkosRUFBRUUsS0FBTUYsRUFBRSxRQUFTLFdBRWYsR0FBSUssR0FBVUwsRUFBRUksU0FJcEJKLEVBQUVFLEtBQU1GLEVBQUUsaUJBQWtCLFdBRXhCLEdBQUlNLEdBQU1OLEVBQUVJLFNBSWhCSixFQUFFRSxLQUFNRixFQUFFLGdCQUFpQixXQUV2QixHQUFJTyxHQUFZUCxFQUFFSSxTQUl0QkosRUFBRUUsS0FBTUYsRUFBRSxxQkFBc0IsV0FFNUIsR0FBSVEsR0FBaUJSLEVBQUVJLFNBSTNCSixFQUFFRSxLQUFNRixFQUFFLFlBQWEsV0FFbkIsR0FBSVMsR0FBZVQsRUFBRUksU0FJekJKLEVBQUVFLEtBQU1GLEVBQUUsa0JBQW1CLFdBRXpCLEdBQUlVLEdBQVVWLEVBQUVJLFNBSXBCSixFQUFFRSxLQUFNRixFQUFFLGdDQUFpQyxXQUV2QyxHQUFJVyxHQUFZWCxFQUFFSSxVQU8xQixJQUFJSCxHQUFZLFNBQVVXLEdBR3RCLEdBQUlDLEdBQVFULEtBQ1JVLEVBQVVkLEVBQUdlLFFBQ2JDLEVBQWFK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LFlBQWEsVUFFdkIyTCxFQUFhLFNBQVdELEdBQ3BCQSxFQUFNMUwsWUFBYSxhQUNuQjBMLEVBQU01TyxTQUFVLFVBRXBCOE8sRUFBaUIsU0FBV0MsR0FDeEIsR0FBSUMsR0FBSyx3SkFDVCxPQUFPQSxHQUFHQyxLQUFLRixJQUVuQlgsRUFBaUIsU0FBV1EsRUFBTzdLLEdBRS9CLEdBQUkySixHQUFPa0IsRUFBTXhMLEtBQU0sT0FFdkIsUUFBYSxVQUFUc0ssR0FBNkIsU0FBVEEsR0FFQSxLQUFoQmtCLEVBQU1mLFNBT0QsVUFBVEgsR0FDS29CLEVBQWdCRixFQUFNZixZQU0vQmdCLEdBQVlELElBYkpELEVBQWVDLElBQ1IsR0FtQnZCdlAsR0FBTTZQLFdBQWEsV0FDZixHQUFJQyxJQUFRLENBVVosT0FSQXhDLEdBQVFqTyxLQUFNLFdBQ1ZGLEVBQUdJLE1BQU9zRSxZQUFhLGVBQ25CMUUsRUFBR0ksTUFBTzBELFNBQVUsZUFDcEI2TSxHQUFRLEtBS1RBLEdBR1hqQiIsImZpbGUiOiJjb250YWN0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcblxuICAgICAgICBuZXcgUHJlbG9hZGVyKCAkKCcucHJlbG9hZGVyJykgKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19pbmRleC1wYWdlJyApLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBQYWdlKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnYm9keScpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBab29tU2l0ZSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5zaXRlX19oZWFkZXInKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgTWVudSggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5tYWluLXNsaWRlcicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBNYWluU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmV4cGVydGlzZV9faXRlbXMnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgRXhwZXJ0aXNlU2xpZGVyKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLnJldmlld3MnKSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBuZXcgUmV2aWV3c1NsaWRlciggJCh0aGlzKSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgICAgICAkLmVhY2goICQoJy5jb250YWN0c19fbWFwJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IExvY2F0aW9uKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNhc2UgLm1haW4tc2xpZGVyX19idG4tZG93bicpLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIG5ldyBTY3JvbGxEb3duKCAkKHRoaXMpICk7XG5cbiAgICAgICAgfSApO1xuXG5cbiAgICB9ICk7XG5cbiAgICB2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfcHJlbG9hZGVyID0gb2JqLFxuICAgICAgICAgICAgX2JvZHkgPSAkKCdib2R5Jyk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zaG93U2l0ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9ib2R5WzBdLnByZWxvYWRlciA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93U2l0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3ByZWxvYWRlci5hZGRDbGFzcyggJ3ByZWxvYWRlcl9sb2FkZWQnICk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIF9wcmVsb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zaXRlJykuYWRkQ2xhc3MoICdzaXRlX19sb2FkZWQnICk7XG5cbiAgICAgICAgICAgICAgICB9LDUwMCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgUGFnZSA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2RvbSA9ICQoICdodG1sLCBib2R5JyApLFxuICAgICAgICAgICAgX3N3aXBlckluaXQgPSBmYWxzZSxcbiAgICAgICAgICAgIF9zd2lwZXIsXG4gICAgICAgICAgICBfc2xpZGVDb250ZW50ID0gX29iai5maW5kKCcuc2xpZGVfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIF9tYWluU2xpZGVyID0gJCgnLm1haW4tc2xpZGVyJyksXG4gICAgICAgICAgICBfYnRuRG93biA9IF9tYWluU2xpZGVyLmZpbmQoJy5tYWluLXNsaWRlcl9fYnRuLWRvd24nKTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDEwMjQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRGdWxsUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyQ29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRGdWxsUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyQ29udGVudCgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lGdWxsUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3dpcGVySW5pdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vX3NsaWRlQ29udGVudC5maW5kKCcuc2xpZGVfX2NvbnRlbnQtaW5uZXInKS5hdHRyKCAnc3R5bGUnLCcnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuRG93bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPj0gMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDMwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICQoIHRoaXMgKS5wYXJlbnRzKCAnLmNhc2UnICkubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYXNlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5zdG9wKCB0cnVlLCBmYWxzZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLmFuaW1hdGUoIHsgc2Nyb2xsVG9wOiBfbWFpblNsaWRlci5pbm5lckhlaWdodCgpIH0sIDMwMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5tb3ZlVG8oMik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZG9tLnN0b3AoIHRydWUsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RvbS5hbmltYXRlKCB7IHNjcm9sbFRvcDogX21haW5TbGlkZXIuaW5uZXJIZWlnaHQoKSB9LCAzMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdEZ1bGxQYWdlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAkKCcjZnVsbHBhZ2UnKS5mdWxscGFnZSgge1xuXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbE92ZXJmbG93OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU2VsZWN0b3I6ICcuc2xpZGVfX2NvbnRlbnQnLFxuICAgICAgICAgICAgICAgICAgICBvbkxlYXZlOiBmdW5jdGlvbiggYW5jaG9yTGluaywgaW5kZXgsIHNsaWRlSW5kZXgsIGRpcmVjdGlvbiwgbmV4dFNsaWRlSW5kZXggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBpbmRleCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubG9nb19pbmRleCcpLmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5sb2dvX2luZGV4Jykuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9ICQoJy5zbGlkZV9fY29udGVudCcpLmVxKCBpbmRleC0xKS5maW5kKCcuc2xpZGVfX2NvbnRlbnQtaW5uZXI+ZGl2PmRpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggYmxvY2suaGFzQ2xhc3MoJ3Jldmlld3MnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrLmZpbmQoJy5yZXZpZXdzX19pdGVtJykuYWRkQ2xhc3MoJ2FuaW1hdGlvbicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Rlc3Ryb3lGdWxsUGFnZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgJC5mbi5mdWxscGFnZS5kZXN0cm95KCdhbGwnKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jZW50ZXJDb250ZW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy9fc2xpZGVDb250ZW50LmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gICAgdmFyIGN1ckNvbnRlbnQgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIC8vICAgICAgICBjdXJDb250ZW50SW5uZXIgPSBjdXJDb250ZW50LmZpbmQoJy5zbGlkZV9fY29udGVudC1pbm5lcicpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gICAgY3VyQ29udGVudElubmVyLmNzcygge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAnbWluLWhlaWdodCc6IF93aW5kb3cuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAvLyAgICB9ICk7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICBpZiggY3VyQ29udGVudElubmVyLmZpbmQoJz5kaXYnKS5oZWlnaHQoKSA8IF93aW5kb3cuaGVpZ2h0KCkgKSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgaWYoIGN1ckNvbnRlbnQuZmluZCgnLmNvbnRhY3RzJykubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICBpZiggY3VyQ29udGVudC5maW5kKCcuY29udGFjdHNfX21hcCcpLmhlaWdodCgpIDwgY3VyQ29udGVudElubmVyLmZpbmQoJz5kaXYnKS5oZWlnaHQoKSApIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGN1ckNvbnRlbnRJbm5lci5hZGRDbGFzcygnY2VudGVyZWQnKTtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgIGN1ckNvbnRlbnRJbm5lci5yZW1vdmVDbGFzcygnY2VudGVyZWQnKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgY3VyQ29udGVudElubmVyLmFkZENsYXNzKCdjZW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgY3VyQ29udGVudElubmVyLnJlbW92ZUNsYXNzKCdjZW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy99ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcblxuXG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFpvb21TaXRlID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQod2luZG93KSxcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICk7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcblxuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0U2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2JvZHkuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAnMjBweCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSA3NjggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3NldFNpemUoKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHZhciBuZXdTaXplO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuaGVpZ2h0KCkgPiA1MDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9ICgoIDEwMCAqICggd2luZG93LmlubmVySGVpZ2h0IC8gOTAwICkgKS81KSArICdweCc7XG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9ICgoIDEwMCAqICggNTAwIC8gOTAwICkgKS81KSArICdweCc7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfYm9keS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IG5ld1NpemVcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uIChvYmopIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cpLFxuICAgICAgICAgICAgX21lbnVCdG4gPSBfb2JqLmZpbmQoJy5zaXRlX19oZWFkZXJfX2J0bicpLFxuICAgICAgICAgICAgX21lbnVJdGVtcyA9IF9vYmouZmluZCgnLnNpdGVfX2hlYWRlci1tZW51JyksXG4gICAgICAgICAgICBfaHRtbCA9ICQoJ2h0bWwnKSxcbiAgICAgICAgICAgIF9ib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfY2xvc2VNZW51ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDEwMjQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX2h0bWwuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX21lbnVJdGVtcy5hdHRyKCAnc3R5bGUnLCAnJyApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cuc2Nyb2xsVG9wKCkgPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcygnZml4ZWQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgX21lbnVCdG4ub24oIHtcblxuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcyggJ29wZW5lZCcgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vcGVuTWVudSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ29wZW5lZCcgKTtcblxuICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9odG1sLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgIF9ib2R5LmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcblxuICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LnNjcm9sbFRvcCgpID4gX29iai5pbm5lckhlaWdodCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTWFpblNsaWRlciA9IGZ1bmN0aW9uICggb2JqICkge1xuXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX3dpbmRvdyA9ICQoIHdpbmRvdyApLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoICcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfc3RlcDEgPSAxNSxcbiAgICAgICAgICAgIF9zdGVwMiA9IDEwLFxuICAgICAgICAgICAgX3N0ZXAzID0gNSxcbiAgICAgICAgICAgIF9zdGVwNCA9IDIwLFxuICAgICAgICAgICAgX3N0ZXA1ID0gMjUsXG4gICAgICAgICAgICBfc3dpcGVyMTtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFxuICAgICAgICAgICAgICAgICAgICAnbW91c2Vtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgJy5tYWluLXNsaWRlciAuc3dpcGVyLXNsaWRlJyxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW1nMSA9IHNsaWRlLmZpbmQoJy5tb3ZlMScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbWcyID0gc2xpZGUuZmluZCgnLm1vdmUyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2ltZzMgPSBzbGlkZS5maW5kKCcubW92ZTMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaW1nNCA9IHNsaWRlLmZpbmQoJy5tb3ZlNCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbWc1ID0gc2xpZGUuZmluZCgnLm1vdmU1Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93LndpZHRoKCkgPiAxMDI0ICYmICEoIF9oZWFkZXIuaGFzQ2xhc3MoJ29wZW5lZCcpICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVggPSBlLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlWSA9IGUucGFnZVksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbGZXaWR0aCA9IF9vYmoud2lkdGgoKSAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbGZIZWlnaHQgPSBfb2JqLmhlaWdodCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudEZyb21DZW50ZXJYID0gKCBwYWdlWCAtIGhhbGZXaWR0aCApIC8gaGFsZldpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50RnJvbUNlbnRlclkgPSAoIHBhZ2VZIC0gaGFsZkhlaWdodCApIC8gaGFsZkhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfd2luZG93Lm91dGVyV2lkdGgoKSA+IDEwMjQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbW92ZUJvdHRvbShwZXJjZW50RnJvbUNlbnRlclgsIHBlcmNlbnRGcm9tQ2VudGVyWSwgX3N0ZXAxLF9pbWcxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21vdmVCb3R0b20ocGVyY2VudEZyb21DZW50ZXJYLCBwZXJjZW50RnJvbUNlbnRlclksIF9zdGVwMSwgJChkb2N1bWVudCkuZmluZCgnLmNvcHlfMScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21vdmVUb3AocGVyY2VudEZyb21DZW50ZXJYLCBwZXJjZW50RnJvbUNlbnRlclksIF9zdGVwMixfaW1nMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tb3ZlVG9wKHBlcmNlbnRGcm9tQ2VudGVyWCwgcGVyY2VudEZyb21DZW50ZXJZLCBfc3RlcDIsICQoZG9jdW1lbnQpLmZpbmQoJy5jb3B5XzInKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tb3ZlVG9wKHBlcmNlbnRGcm9tQ2VudGVyWCwgcGVyY2VudEZyb21DZW50ZXJZLCBfc3RlcDMsX2ltZzMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbW92ZVRvcChwZXJjZW50RnJvbUNlbnRlclgsIHBlcmNlbnRGcm9tQ2VudGVyWSwgX3N0ZXAzLCAkKGRvY3VtZW50KS5maW5kKCcuY29weV8zJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbW92ZUJvdHRvbShwZXJjZW50RnJvbUNlbnRlclgsIHBlcmNlbnRGcm9tQ2VudGVyWSwgX3N0ZXA0LF9pbWc0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21vdmVCb3R0b20ocGVyY2VudEZyb21DZW50ZXJYLCBwZXJjZW50RnJvbUNlbnRlclksIF9zdGVwNCwgJChkb2N1bWVudCkuZmluZCgnLmNvcHlfNCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21vdmVCb3R0b20ocGVyY2VudEZyb21DZW50ZXJYLCBwZXJjZW50RnJvbUNlbnRlclksIF9zdGVwNSxfaW1nNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tb3ZlQm90dG9tKHBlcmNlbnRGcm9tQ2VudGVyWCwgcGVyY2VudEZyb21DZW50ZXJZLCBfc3RlcDUsICQoZG9jdW1lbnQpLmZpbmQoJy5jb3B5XzUnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA+PSAxMDI0ICYmIHNjcmVlbi53aWR0aCA+PSAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5hdHRyKCdzdHlsZScsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcudmVnZXRhYmxlcycpLmF0dHIoJ3N0eWxlJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCdtYWluLXNsaWRlcl9pbmRleCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRTZWN0aW9uID0gX29iai5wYXJlbnRzKCcuc2xpZGVfX2NvbnRlbnQnKS5uZXh0KCkuZmluZCgnLnNsaWRlX19jb250ZW50LWlubmVyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IF9vYmouZmluZCgnLnN3aXBlci1zbGlkZS1hY3RpdmUnKS5pbm5lckhlaWdodCgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLmZpbmQoJy5zd2lwZXItc2xpZGUtYWN0aXZlIC52ZWdldGFibGVzJykuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVnZXRhYmxlID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSB2ZWdldGFibGUucG9zaXRpb24oKS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0VmVnID0gdmVnZXRhYmxlLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggcG9zICsgaGVpZ2h0VmVnID4gaGVpZ2h0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IHZlZ2V0YWJsZS5hdHRyKCdjbGFzcycpLnJlcGxhY2UoIC8oXi4rXFxEKShcXGQrKShcXEQuKyQpL2ksJyQyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQoJy5jb3B5X21vdmUuY29weV8nK251bSsnJykubGVuZ3RoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRJbWcgPSAgJCgnLmNvcHlfbW92ZS5jb3B5XycrbnVtKycnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCgnLnNsaWRlX19jb250ZW50JykuaW5uZXJIZWlnaHQoKSA8ICQoJy5tYWluLXNsaWRlcicpLmlubmVySGVpZ2h0KCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgPSAkKCcubWFpbi1zbGlkZXInKS5pbm5lckhlaWdodCgpLSQoJy5zbGlkZV9fY29udGVudCcpLmlubmVySGVpZ2h0KClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW1nLm9mZnNldCgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiB2ZWdldGFibGUub2Zmc2V0KCkudG9wLWRpZmYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiB2ZWdldGFibGUub2Zmc2V0KCkubGVmdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW1nLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IHZlZ2V0YWJsZS5jbG9uZSh0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbWcuYWRkQ2xhc3MoJ2NvcHlfbW92ZSBjb3B5XycrbnVtKycnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNlY3Rpb24ucHJlcGVuZChuZXdJbWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAkKCcuc2xpZGVfX2NvbnRlbnQnKS5pbm5lckhlaWdodCgpIDwgJCgnLm1haW4tc2xpZGVyJykuaW5uZXJIZWlnaHQoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9ICQoJy5tYWluLXNsaWRlcicpLmlubmVySGVpZ2h0KCktJCgnLnNsaWRlX19jb250ZW50JykuaW5uZXJIZWlnaHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbWcub2Zmc2V0KCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHZlZ2V0YWJsZS5vZmZzZXQoKS50b3AtZGlmZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHZlZ2V0YWJsZS5vZmZzZXQoKS5sZWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbWcuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gdmVnZXRhYmxlLmF0dHIoJ2NsYXNzJykucmVwbGFjZSggLyheLitcXEQpKFxcZCspKFxcRC4rJCkvaSwnJDInKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2NvcHlfbW92ZSBjb3B5XycrbnVtKycnKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE1MDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9yaWVudGF0aW9uY2hhbmdlXCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggc2NyZWVuLndpZHRoIDwgMTAyNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG5cbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlcjEgPSBuZXcgU3dpcGVyKCBfb2JqLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDAsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA3MDAsXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc0ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tbmV4dCcpWzBdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfb2JqLmZpbmQoJy5zd2lwZXItYnV0dG9uLXByZXYnKVswXSxcbiAgICAgICAgICAgICAgICAgICAgb25Jbml0OiBmdW5jdGlvbiggc3dpcGVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0U2xpZGUgPSBzd2lwZXIuc2xpZGVzLmZpbHRlcignLnN3aXBlci1zbGlkZS1hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uSW5kZXggPSBhY3RTbGlkZS5wYXJlbnRzKCcuc2xpZGVfX2NvbnRlbnQnKS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZWN0aW9uID0gJCgnLnNsaWRlX19jb250ZW50JykuZXEoc2VjdGlvbkluZGV4KzEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX29iai5oYXNDbGFzcygnbWFpbi1zbGlkZXJfaW5kZXgnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBhY3RTbGlkZS5pbm5lckhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0U2xpZGUuZmluZCgnLnZlZ2V0YWJsZXMnKS5lYWNoKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlZ2V0YWJsZSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSB2ZWdldGFibGUucG9zaXRpb24oKS50b3AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRWZWcgPSB2ZWdldGFibGUuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHBvcyArIGhlaWdodFZlZyA+IGhlaWdodCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IHZlZ2V0YWJsZS5hdHRyKCdjbGFzcycpLnJlcGxhY2UoIC8oXi4rXFxEKShcXGQrKShcXEQuKyQpL2ksJyQyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbWcgPSB2ZWdldGFibGUuY2xvbmUodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ltZy5hZGRDbGFzcygnY29weV9tb3ZlIGNvcHlfJytudW0rJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNlY3Rpb24ucHJlcGVuZChuZXdJbWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggJCgnLnNsaWRlX19jb250ZW50JykuaW5uZXJIZWlnaHQoKSA8ICQoJy5tYWluLXNsaWRlcicpLmlubmVySGVpZ2h0KCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmID0gJCgnLm1haW4tc2xpZGVyJykuaW5uZXJIZWlnaHQoKS0kKCcuc2xpZGVfX2NvbnRlbnQnKS5pbm5lckhlaWdodCgpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW1nLm9mZnNldCgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogdmVnZXRhYmxlLm9mZnNldCgpLnRvcC1kaWZmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHZlZ2V0YWJsZS5vZmZzZXQoKS5sZWZ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ltZy5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b206ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlU3RhcnQ6IGZ1bmN0aW9uKCBzd2lwZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RTbGlkZSA9IHN3aXBlci5zbGlkZXMuZmlsdGVyKCcuc3dpcGVyLXNsaWRlLWFjdGl2ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25JbmRleCA9IGFjdFNsaWRlLnBhcmVudHMoJy5zbGlkZV9fY29udGVudCcpLmluZGV4KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFNlY3Rpb24gPSAkKCcuc2xpZGVfX2NvbnRlbnQnKS5lcShzZWN0aW9uSW5kZXgrMSkuZmluZCgnLnNsaWRlX19jb250ZW50LWlubmVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5jb3B5X21vdmUnKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvblNsaWRlQ2hhbmdlRW5kOiBmdW5jdGlvbiggc3dpcGVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0U2xpZGUgPSBzd2lwZXIuc2xpZGVzLmZpbHRlcignLnN3aXBlci1zbGlkZS1hY3RpdmUnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uSW5kZXggPSBhY3RTbGlkZS5wYXJlbnRzKCcuc2xpZGVfX2NvbnRlbnQnKS5pbmRleCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZWN0aW9uID0gJCgnLnNsaWRlX19jb250ZW50JykuZXEoc2VjdGlvbkluZGV4KzEpLmZpbmQoJy5zbGlkZV9fY29udGVudC1pbm5lcicpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb2JqLmhhc0NsYXNzKCdtYWluLXNsaWRlcl9pbmRleCcpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGFjdFNsaWRlLmlubmVySGVpZ2h0KCk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdFNsaWRlLmZpbmQoJy52ZWdldGFibGVzJykuZWFjaChmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZWdldGFibGUgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gdmVnZXRhYmxlLnBvc2l0aW9uKCkudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0VmVnID0gdmVnZXRhYmxlLmhlaWdodCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBwb3MgKyBoZWlnaHRWZWcgPiBoZWlnaHQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSB2ZWdldGFibGUuYXR0cignY2xhc3MnKS5yZXBsYWNlKCAvKF4uK1xcRCkoXFxkKykoXFxELiskKS9pLCckMicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW1nID0gdmVnZXRhYmxlLmNsb25lKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbWcuYWRkQ2xhc3MoJ2NvcHlfbW92ZSBjb3B5XycrbnVtKycnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRTZWN0aW9uLnByZXBlbmQobmV3SW1nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICQoJy5zbGlkZV9fY29udGVudCcpLmlubmVySGVpZ2h0KCkgPCAkKCcubWFpbi1zbGlkZXInKS5pbm5lckhlaWdodCgpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9ICQoJy5tYWluLXNsaWRlcicpLmlubmVySGVpZ2h0KCktJCgnLnNsaWRlX19jb250ZW50JykuaW5uZXJIZWlnaHQoKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ltZy5vZmZzZXQoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHZlZ2V0YWJsZS5vZmZzZXQoKS50b3AtZGlmZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiB2ZWdldGFibGUub2Zmc2V0KCkubGVmdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbWcuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tb3ZlQm90dG9tID0gZnVuY3Rpb24oIHhQZXJjZW50LCB5UGVyY2VudCwgc3RlcCwgaW1hZ2UgKSB7XG5cbiAgICAgICAgICAgICAgICBpbWFnZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSggJyArIC0oIHhQZXJjZW50ICogc3RlcCApICsgJ3B4LCcgKyAtKCB5UGVyY2VudCAqIHN0ZXAgKSArICdweCApJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoICcgKyAtKCB4UGVyY2VudCAqIHN0ZXAgKSArICdweCwgJyArIC0oIHlQZXJjZW50ICogc3RlcCApICsgJ3B4ICApJ1xuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tb3ZlVG9wID0gZnVuY3Rpb24oIHhQZXJjZW50LCB5UGVyY2VudCwgc3RlcCwgaW1hZ2UgKSB7XG5cbiAgICAgICAgICAgICAgICBpbWFnZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3RyYW5zbGF0ZSggJyArICggeFBlcmNlbnQgKiBzdGVwICkgKyAncHggLCcgKyAoIHlQZXJjZW50ICogc3RlcCApICsgJ3B4ICApJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICd0cmFuc2xhdGUoICcgKyAoIHhQZXJjZW50ICogc3RlcCApICsgJ3B4ICwgJyArICggeVBlcmNlbnQgKiBzdGVwICkgKyAncHggICknXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NldEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IF93aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmlubmVySGVpZ2h0KCBoZWlnaHQgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG5cblxuICAgICAgICAgICAgICAgIGlmKCBfd2luZG93LndpZHRoKCkgPCAxMDI0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIF9zZXRIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgRXhwZXJ0aXNlU2xpZGVyID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfc3dpcGVySW5pdCA9IGZhbHNlLFxuICAgICAgICAgICAgX3N3aXBlcjtcblxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAhX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlckluaXQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX3N3aXBlckluaXQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Rlc3Ryb3lTd2lwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlckluaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXRTd2lwZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBuZXcgU3dpcGVyKCBfb2JqLmZpbmQoICcuc3dpcGVyLWNvbnRhaW5lcicgKSwge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLjksXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Rlc3Ryb3lTd2lwZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIF9zd2lwZXIuZGVzdHJveSggdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgaWYoIF93aW5kb3cud2lkdGgoKSA8IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggIV9zd2lwZXJJbml0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW5pdFN3aXBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3N3aXBlckluaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFNjcm9sbERvd24gPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9zY3JvbGxlciA9ICQoICdodG1sLCBib2R5JyApLFxuICAgICAgICAgICAgX21haW5TbGlkZXJQaWMgPSAkKCcubWFpbi1zbGlkZXJfX2lubmVyLXBpYycpO1xuXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgX29iai5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDMwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9zY3JvbGxlci5hbmltYXRlKCB7IHNjcm9sbFRvcDogX21haW5TbGlkZXJQaWMuaW5uZXJIZWlnaHQoKSB9LCAzMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG4gICAgdmFyIFJldmlld3NTbGlkZXIgPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF9zd2lwZXI7XG5cbiAgICAgICAgdmFyIF9hZGRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdFN3aXBlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX3N3aXBlciA9IG5ldyBTd2lwZXIoIF9vYmouZmluZCggJy5zd2lwZXItY29udGFpbmVyJyApLCB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMzAsXG4gICAgICAgICAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogJ2ZhZGUnLFxuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc0ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5leHRCdXR0b246IF9vYmouZmluZCgnLnN3aXBlci1idXR0b24tbmV4dCcpWzBdLFxuICAgICAgICAgICAgICAgICAgICBwcmV2QnV0dG9uOiBfb2JqLmZpbmQoJy5zd2lwZXItYnV0dG9uLXByZXYnKVswXVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29ialswXS5vYmogPSBfc2VsZjtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2luaXRTd2lwZXIoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG5cbiAgICB2YXIgTG9jYXRpb24gPSBmdW5jdGlvbiAoIG9iaiApIHtcblxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxuICAgICAgICAgICAgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF9tYXAgPSBfb2JqLmZpbmQoJyNjb250YWN0LWdvb2dsZS1tYXAnKSxcbiAgICAgICAgICAgIF9tYXBMYXQgPSBfbWFwLmRhdGEoJ21hcC1sYXQnKSxcbiAgICAgICAgICAgIF9tYXBMbmcgPSBfbWFwLmRhdGEoJ21hcC1sbmcnKSxcbiAgICAgICAgICAgIF9tYXBab29tID0gX21hcC5kYXRhKCdtYXAtem9vbScpLFxuICAgICAgICAgICAgX2J0biA9ICQoJy5jb250YWN0c19fY2l0aWVzIC5idG4nKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIG1hcCxcbiAgICAgICAgICAgIG1hcmtlcjtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0SGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cblxuXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIoIHdpbmRvdywgJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggX2J0bi5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBteUxhdExuZyA9IHtsYXQ6IF9idG4uZmlsdGVyKCcuYWN0aXZlJykuZGF0YSgnbWFwLWxhdCcpLCBsbmc6IF9idG4uZmlsdGVyKCcuYWN0aXZlJykuZGF0YSgnbWFwLWxuZycpfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldENlbnRlciggbXlMYXRMbmcgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29mZnNldENlbnRlciggbWFwLmdldENlbnRlcigpLCAwLCA1MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG4ub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggIShjdXJJdGVtLmhhc0NsYXNzKCdhY3RpdmUnKSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYnRuLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBteUxhdExuZyA9IHtsYXQ6ICQodGhpcykuZGF0YSgnbWFwLWxhdCcpLCBsbmc6ICQodGhpcykuZGF0YSgnbWFwLWxuZycpfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXIuc2V0UG9zaXRpb24obXlMYXRMbmcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIobWFwLCAncmVzaXplJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5zZXRDZW50ZXIobXlMYXRMbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2Zmc2V0Q2VudGVyKCBtYXAuZ2V0Q2VudGVyKCksIDAsIDUwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vZmZzZXRDZW50ZXIgPSBmdW5jdGlvbiAoIGxhdGxuZywgb2Zmc2V0eCwgb2Zmc2V0eSApIHtcblxuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGgucG93KCAyLCBtYXAuZ2V0Wm9vbSgpICksXG4gICAgICAgICAgICAgICAgICAgIHdvcmxkQ29vcmRpbmF0ZUNlbnRlciA9IG1hcC5nZXRQcm9qZWN0aW9uKCkuZnJvbUxhdExuZ1RvUG9pbnQoIGxhdGxuZyApLFxuICAgICAgICAgICAgICAgICAgICBwaXhlbE9mZnNldCA9IG5ldyBnb29nbGUubWFwcy5Qb2ludCggKCBvZmZzZXR4L3NjYWxlICkgfHwgMCwgKCBvZmZzZXR5L3NjYWxlICkgfHwgMCApLFxuICAgICAgICAgICAgICAgICAgICB3b3JsZENvb3JkaW5hdGVOZXdDZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29vcmRpbmF0ZUNlbnRlci54IC0gcGl4ZWxPZmZzZXQueCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmxkQ29vcmRpbmF0ZUNlbnRlci55ICsgcGl4ZWxPZmZzZXQueVxuXG4gICAgICAgICAgICAgICAgICAgICksXG5cbiAgICAgICAgICAgICAgICAgICAgbmV3Q2VudGVyID0gbWFwLmdldFByb2plY3Rpb24oKS5mcm9tUG9pbnRUb0xhdExuZyggd29ybGRDb29yZGluYXRlTmV3Q2VudGVyICk7XG5cbiAgICAgICAgICAgICAgICBtYXAuc2V0Q2VudGVyKCBuZXdDZW50ZXIgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21NYXBUeXBlID0gbmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodWVcIjogXCIjYjAwMDQwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzYXR1cmF0aW9uXCI6IDYwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGlnaHRuZXNzXCI6IC00MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmNmZhNFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwid2F0ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI0I2MTUzMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjQjYxNTMwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmxvY2FsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNCNjE1MzBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiA2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5oaWdod2F5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNCNjE1MzBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAtMjVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmFydGVyaWFsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNCNjE1MzBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiAtMTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiBcIiNCNjE1MzBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImxpZ2h0bmVzc1wiOiA3MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInRyYW5zaXQubGluZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzdHlsZXJzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogXCIjQjYxNTMwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsaWdodG5lc3NcIjogOTBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5jb3VudHJ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZmVhdHVyZVR5cGVcIjogXCJ0cmFuc2l0LnN0YXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHMudGV4dC5zdHJva2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInZpc2liaWxpdHlcIjogXCJvZmZcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJmZWF0dXJlVHlwZVwiOiBcInRyYW5zaXQuc3RhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJlbGVtZW50VHlwZVwiOiBcImxhYmVscy50ZXh0LmZpbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3R5bGVyc1wiOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IFwiI2ZmNmZhNFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnQ3VzdG9tIFN0eWxlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21NYXBUeXBlSWQgPSAnY3VzdG9tX3N0eWxlJztcblxuICAgICAgICAgICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoIF9tYXBbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgem9vbTogX21hcFpvb20sXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0ZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHtsYXQ6IF9tYXBMYXQsIGxuZzogX21hcExuZ30sXG4gICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkczogW2dvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLCBjdXN0b21NYXBUeXBlSWRdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjoge2xhdDogX21hcExhdCwgbG5nOiBfbWFwTG5nfSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1hcC5tYXBUeXBlcy5zZXQoY3VzdG9tTWFwVHlwZUlkLCBjdXN0b21NYXBUeXBlKTtcbiAgICAgICAgICAgICAgICBtYXAuc2V0TWFwVHlwZUlkKGN1c3RvbU1hcFR5cGVJZCk7XG5cbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UobWFwLCAnaWRsZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggX2J0bi5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBteUxhdExuZyA9IHtsYXQ6IF9idG4uZmlsdGVyKCcuYWN0aXZlJykuZGF0YSgnbWFwLWxhdCcpLCBsbmc6IF9idG4uZmlsdGVyKCcuYWN0aXZlJykuZGF0YSgnbWFwLWxuZycpfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldENlbnRlciggbXlMYXRMbmcgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX29mZnNldENlbnRlciggbWFwLmdldENlbnRlcigpLCAwLCA1MCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsIF9pbml0TWFwKTtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX3NldEhlaWdodCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gJCgnLmNvbnRhY3RzX19pbmZvJyk7XG5cbiAgICAgICAgICAgICAgICBpZiggX3dpbmRvdy53aWR0aCgpID49IDc2OCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiggY29udGVudC5pbm5lckhlaWdodCgpID4gY29udGVudC5pbm5lcldpZHRoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouaGVpZ2h0KCBjb250ZW50LmlubmVySGVpZ2h0KCkrKGNvbnRlbnQuaW5uZXJIZWlnaHQoKSowLjI1KSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX29iai53aWR0aCggY29udGVudC5pbm5lckhlaWdodCgpKyhjb250ZW50LmlubmVySGVpZ2h0KCkqMC4yNSkgKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouaGVpZ2h0KCBjb250ZW50LmlubmVyV2lkdGgoKSsoY29udGVudC5pbm5lcldpZHRoKCkqMC4yNSkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoud2lkdGgoIGNvbnRlbnQuaW5uZXJXaWR0aCgpKyhjb250ZW50LmlubmVyV2lkdGgoKSowLjI1KSApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGNvbnRlbnQucGFyZW50cygnLmNvbnRhY3RzJykuaGFzQ2xhc3MoJ2NvbnRhY3RzXzInKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIGNvbnRlbnQuaW5uZXJIZWlnaHQoKSA+IGNvbnRlbnQuaW5uZXJXaWR0aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5oZWlnaHQoIGNvbnRlbnQuaW5uZXJIZWlnaHQoKSsoY29udGVudC5pbm5lckhlaWdodCgpKjAuNikgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb2JqLndpZHRoKCBjb250ZW50LmlubmVySGVpZ2h0KCkrKGNvbnRlbnQuaW5uZXJIZWlnaHQoKSowLjYpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouaGVpZ2h0KCBjb250ZW50LmlubmVyV2lkdGgoKSsoY29udGVudC5pbm5lcldpZHRoKCkqMC42KSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmoud2lkdGgoIGNvbnRlbnQuaW5uZXJXaWR0aCgpKyhjb250ZW50LmlubmVyV2lkdGgoKSowLjYpICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5hdHRyKCdzdHlsZScsJycpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgX2luaXQoKTtcbiAgICB9O1xuXG59ICkoKTtcbiIsIiggZnVuY3Rpb24oKSB7XG5cbiAgICAkKCBmdW5jdGlvbigpIHtcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICAgICQuZWFjaCggJCgnLmNvbnRhY3RzX19mb3JtJyksIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgbmV3IEZvcm1WYWxpZGF0b3IoICQodGhpcykgKTtcblxuICAgICAgICB9ICk7XG5cblxuICAgIH0gKTtcblxuICAgIHZhciBGb3JtVmFsaWRhdG9yID0gZnVuY3Rpb24gKG9iaikge1xuXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2Zvcm0gPSAgX29iai5maW5kKCdmb3JtJyksXG4gICAgICAgICAgICBfZmllbGRzID0gX29iai5maW5kKCdpbnB1dDpyZXF1aXJlZCwgdGV4dGFyZWE6cmVxdWlyZWQnKSxcbiAgICAgICAgICAgIF9lcnJvck1lc3NhZ2UgPSBfb2JqLmZpbmQoJy5jb250YWN0c19fZmllbGRzLWVycm9yJyksXG4gICAgICAgICAgICBfdGV4dGFyZWFGaWVsZCA9ICBfb2JqLmZpbmQoJy5jb250YWN0c19fZmllbGRzLXRleHRhcmVhJyksXG4gICAgICAgICAgICBfdGV4dGFyZWFIZWlnaHQgPSAgX29iai5maW5kKCcuY29udGFjdHNfX2ZpZWxkcy10ZXh0YXJlYS1oZWlnaHQnKSxcbiAgICAgICAgICAgIF9idG5TdWNjZXNzID0gJCgnLmNvbnRhY3RzX19zdWNjZXNzIC5idG4nKSxcbiAgICAgICAgICAgIF9kb20gPSAkKCAnaHRtbCwgYm9keScgKSxcbiAgICAgICAgICAgIF9jYW5UeXBlID0gZmFsc2UsXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWpheFJlcXVlc3QgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBfZm9ybS5hdHRyKCdkYXRhLWFjdGlvbicpO1xuXG4gICAgICAgICAgICAgICAgX3JlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogX2Zvcm0uc2VyaWFsaXplKCksXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDIwMDAwLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZpZWxkcy52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RleHRhcmVhRmllbGQuYXR0cignc3R5bGUnLCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90ZXh0YXJlYUhlaWdodC5odG1sKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKFhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWE1MSHR0cFJlcXVlc3Quc3RhdHVzVGV4dCAhPSBcImFib3J0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVycm9yXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIF9maWVsZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoICQodGhpcykudmFsKCkgPT09ICcnICl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2ZpZWxkcy5lYWNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCAkKCB0aGlzICkgKTtcbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBfZm9ybS5vbigge1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uKCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggX2ZpZWxkcy5oYXNDbGFzcygnbm90LXRvdWNoZWQnKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmouZmluZCgnLm5vdC10b3VjaGVkOmZpcnN0JykuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZXJyb3JNZXNzYWdlLnRleHQoIF9vYmouZmluZCgnLm5vdC10b3VjaGVkOmZpcnN0JykuZGF0YSgnZXJyb3InKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvck1lc3NhZ2UuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9lcnJvck1lc3NhZ2UucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2ZpZWxkcy5vbigge1xuICAgICAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIGZpZWxkID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGZpZWxkUGFyZW50ID0gZmllbGQucGFyZW50KCcuY29udGFjdHNfX2ZpZWxkcy13cmFwJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICB2YWwgPSBmaWVsZC52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIGNhcmV0ID0gJCgnPHNwYW4gY2xhc3M9XCJjb250YWN0c19fZmllbGRzLWNhcmV0XCI+PC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZmllbGRQYXJlbnQuYXBwZW5kKGNhcmV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FyZXQudGV4dCh2YWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGtleXByZXNzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyggJ25vdC10b3VjaGVkJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Vycm9yTWVzc2FnZS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAga2V5dXA6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsaWRhdGVGaWVsZCggJCggdGhpcyApICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgX2J0blN1Y2Nlc3Mub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF90ZXh0YXJlYUZpZWxkLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJCh0aGlzKS5maW5kKCd0ZXh0YXJlYScpLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGV4dGFyZWFIZWlnaHQuaHRtbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGV4dGFyZWFGaWVsZC5jc3MoICdoZWlnaHQnLCBfdGV4dGFyZWFIZWlnaHQuaW5uZXJIZWlnaHQoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tYWtlTm90VmFsaWQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xuICAgICAgICAgICAgICAgIGZpZWxkLmFkZENsYXNzKCAnbm90LXZhbGlkJyApO1xuICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUNsYXNzKCAndmFsaWQnICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21ha2VWYWxpZCA9IGZ1bmN0aW9uICggZmllbGQgKSB7XG4gICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQ2xhc3MoICdub3QtdmFsaWQnICk7XG4gICAgICAgICAgICAgICAgZmllbGQuYWRkQ2xhc3MoICd2YWxpZCcgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uICggZW1haWwgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkID0gZnVuY3Rpb24gKCBmaWVsZCwgZSApIHtcblxuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZmllbGQuYXR0ciggJ3R5cGUnKTtcblxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnIHx8IHR5cGUgPT09ICd0ZXh0JyApe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBmaWVsZC52YWwoKSA9PT0gJycgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnICl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX3ZhbGlkYXRlRW1haWwoIGZpZWxkLnZhbCgpICkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlTm90VmFsaWQoIGZpZWxkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBfbWFrZVZhbGlkKCBmaWVsZCApO1xuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG4gICAgICAgIF9zZWxmLmNoZWNrVmFsaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBfZmllbGRzLmVhY2goIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcbiAgICAgICAgICAgICAgICBpZiggJCggdGhpcyApLmhhc0NsYXNzKCAnbm90LXZhbGlkJyApICl7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIHJldHVybiB2YWxpZDtcbiAgICAgICAgfTtcblxuICAgICAgICBfY29uc3RydWN0b3IoKTtcbiAgICB9O1xuXG59ICkoKTtcblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
